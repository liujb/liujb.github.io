<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This is description">
<meta property="og:type" content="website">
<meta property="og:title" content="liujb&#39;s blog">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="liujb&#39;s blog">
<meta property="og:description" content="This is description">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="liujb&#39;s blog">
<meta name="twitter:description" content="This is description">

<link rel="canonical" href="http://yoursite.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>liujb's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liujb's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">About tech</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">186</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/liujb" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/02/Web开发之初次接触Docker笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/02/Web开发之初次接触Docker笔记/" class="post-title-link" itemprop="url">前端狗初次接触Docker笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-05-02 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-02T00:00:00+08:00">2017-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p></p>
<h1 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h1><p>Docker是基于Golang实现的云开源项目，诞生于2013年初，Golang这门语言也是跟随Docker火起来的。</p>
<p>Docker的主要目标是”Build, Ship and Run Any App, Anywhere.”，即通过对应用组件的封装，分发，部署，运行等生命周期的管理，达到应用级别的“一次封装，到处运行”。这里的组件可以是Web应用，可以是一套数据库服务，甚至可以是操作系统或者编译器。</p>
<p>Docker引擎的基础是Linux容器（Linux Containers，LXC）</p>
<h2 id="Docker的优势"><a href="#Docker的优势" class="headerlink" title="Docker的优势"></a>Docker的优势</h2><ol>
<li>更快速的交付和部署</li>
<li>更高的资源利用。</li>
<li>更轻松的迁移和扩展。</li>
<li>更简单的更新管理。</li>
</ol>
<h2 id="Docker的模型"><a href="#Docker的模型" class="headerlink" title="Docker的模型"></a>Docker的模型</h2><p>&lt;img src=<a href="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/linux_docker_host.svg" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/liujb/imgbed/img/linux_docker_host.svg</a> width=400&gt;<br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/linux_docker_host.svg" alt=""></p>
<h2 id="支持的平台"><a href="#支持的平台" class="headerlink" title="支持的平台"></a>支持的平台</h2><p>Docker目前不支持Mac和Windows</p>
<h1 id="三大核心概念"><a href="#三大核心概念" class="headerlink" title="三大核心概念"></a>三大核心概念</h1><h2 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h2><p>Docker镜像类似虚拟机镜像，可以理解为面向DO乘客人引擎的只读模版，包含文件系统。</p>
<blockquote>
<p>说人话，理解为模板就行了。</p>
</blockquote>
<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><blockquote>
<p>理解为镜像的实例。</p>
</blockquote>
<p>在Kitematic上点击CREATE就是创建容器，说白了就是创建了一台linux环境的虚拟机。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974174292136.jpg" alt=""></p>
<p>包括我们自己在alphacloud上点击镜像后边的部署也是一样的过程。</p>
<h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>理解为存放镜像文件的场所，往往会与registry混为一谈，registry上往往存放着多个仓库。开源的仓库为<code>https://hub.Docker.com</code>，这个可以理解为github，我们可以将镜像PUSH到该平台，同时也能pull下来。</p>
<h1 id="实战阶段"><a href="#实战阶段" class="headerlink" title="实战阶段"></a>实战阶段</h1><p>记得在很早之前我就尝试安装过Docker，回过去翻看了下过去的文档发现更加混乱了。又是boot2Docker，又是Docker-machine，又是Docker ToolBox搞得有点蒙圈了。</p>
<h2 id="Docker-machine"><a href="#Docker-machine" class="headerlink" title="Docker-machine"></a>Docker-machine</h2><p>我们知道Docker本身不支持Mac和Windows系统，过去为了在Mac和windows平台上也能用上Docker，所以有一个boot2Docker工具，后来该工具被官方的<a href="https://www.Docker.com/products/Docker-toolbox" target="_blank" rel="noopener">Docker ToolBox</a>替代了。</p>
<p>Docker-ToolBox包括</p>
<ol>
<li>Docker 客户端</li>
<li>Docker-machine 工具</li>
<li>Docker-compose 工具</li>
<li>Kitematic 一个Docker的GUI</li>
<li>VirtualBox</li>
</ol>
<p>而在Mac平台上Docker的模型</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/mac_docker_host.svg" alt=""></p>
<p>所以<code>Docker-machine</code>是在Mac和Windows平台上管理Docker_HOST的工具，这些管理包括创建、环境配置等操作。</p>
<h3 id="创建Docker-host"><a href="#创建Docker-host" class="headerlink" title="创建Docker host"></a>创建Docker host</h3><p>安装完Docker ToolBox之后，首先需要通过Docker-machine命令创建host环境，说白了就是创建了一个虚拟机，命令如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Docker-machine create --driver virtualbox default</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个driver可以替换为其他虚拟机软件</p>
</blockquote>
<p>执行完之后通过<code>virtualbox</code>发现有一台虚拟机</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974187431561.jpg" alt=""></p>
<h3 id="常用Docker-machine命令"><a href="#常用Docker-machine命令" class="headerlink" title="常用Docker-machine命令"></a>常用Docker-machine命令</h3><ol>
<li>Docker-machine status default </li>
<li>Docker-machine start default </li>
<li>Docker-machine env default </li>
<li>Docker-machine stop default</li>
</ol>
<h3 id="启动Docker宿主环境"><a href="#启动Docker宿主环境" class="headerlink" title="启动Docker宿主环境"></a>启动Docker宿主环境</h3><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974189955254.jpg" alt=""></p>
<h3 id="查看Docker宿主状态"><a href="#查看Docker宿主状态" class="headerlink" title="查看Docker宿主状态"></a>查看Docker宿主状态</h3><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974190267482.jpg" alt=""></p>
<h3 id="显示Docker客户端的环境配置命令"><a href="#显示Docker客户端的环境配置命令" class="headerlink" title="显示Docker客户端的环境配置命令"></a>显示Docker客户端的环境配置命令</h3><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974190583852.jpg" alt=""></p>
<h3 id="配置Docker客户端环境"><a href="#配置Docker客户端环境" class="headerlink" title="配置Docker客户端环境"></a>配置Docker客户端环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval $(Docker-machine env default )</span><br></pre></td></tr></table></figure>
<p>这条命令执行成功后，Docker客户端才能跟Docker宿主环境进行通讯以实现对镜像和容器的管理。</p>
<h3 id="Docker-machine小结"><a href="#Docker-machine小结" class="headerlink" title="Docker-machine小结"></a>Docker-machine小结</h3><p>主要通过以上几条命令，实现了对Docker宿主环境的创建、启动、停止、状态查看、客户端环境配置命令查看等功能</p>
<p>详细的命令如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">➜  Manhattan Docker-machine</span><br><span class="line">Usage: Docker-machine [OPTIONS] COMMAND [arg...]</span><br><span class="line"></span><br><span class="line">Create and manage machines running Docker.</span><br><span class="line"></span><br><span class="line">Version: 0.11.0, build 5b27455</span><br><span class="line"></span><br><span class="line">Author:</span><br><span class="line">  Docker Machine Contributors - &lt;https://github.com/Docker/machine&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --debug, -D						Enable debug mode</span><br><span class="line">  --storage-path, -s &quot;/Users/liujb/.Docker/machine&quot;	Configures storage path [$MACHINE_STORAGE_PATH]</span><br><span class="line">  --tls-ca-cert 					CA to verify remotes against [$MACHINE_TLS_CA_CERT]</span><br><span class="line">  --tls-ca-key 						Private key to generate certificates [$MACHINE_TLS_CA_KEY]</span><br><span class="line">  --tls-client-cert 					Client cert to use for TLS [$MACHINE_TLS_CLIENT_CERT]</span><br><span class="line">  --tls-client-key 					Private key used in client TLS auth [$MACHINE_TLS_CLIENT_KEY]</span><br><span class="line">  --github-api-token 					Token to use for requests to the Github API [$MACHINE_GITHUB_API_TOKEN]</span><br><span class="line">  --native-ssh						Use the native (Go-based) SSH implementation. [$MACHINE_NATIVE_SSH]</span><br><span class="line">  --bugsnag-api-token 					BugSnag API token for crash reporting [$MACHINE_BUGSNAG_API_TOKEN]</span><br><span class="line">  --help, -h						show help</span><br><span class="line">  --version, -v						print the version</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  active		Print which machine is active</span><br><span class="line">  config		Print the connection config for machine</span><br><span class="line">  create		Create a machine</span><br><span class="line">  env			Display the commands to set up the environment for the Docker client</span><br><span class="line">  inspect		Inspect information about a machine</span><br><span class="line">  ip			Get the IP address of a machine</span><br><span class="line">  kill			Kill a machine</span><br><span class="line">  ls			List machines</span><br><span class="line">  provision		Re-provision existing machines</span><br><span class="line">  regenerate-certs	Regenerate TLS Certificates for a machine</span><br><span class="line">  restart		Restart a machine</span><br><span class="line">  rm			Remove a machine</span><br><span class="line">  ssh			Log into or run a command on a machine with SSH.</span><br><span class="line">  scp			Copy files between machines</span><br><span class="line">  start			Start a machine</span><br><span class="line">  status		Get the status of a machine</span><br><span class="line">  stop			Stop a machine</span><br><span class="line">  upgrade		Upgrade a machine to the latest version of Docker</span><br><span class="line">  url			Get the URL of a machine</span><br><span class="line">  version		Show the Docker Machine version or a machine Docker version</span><br><span class="line">  help			Shows a list of commands or help for one command</span><br><span class="line"></span><br><span class="line">Run &apos;Docker-machine COMMAND --help&apos; for more information on a command.</span><br></pre></td></tr></table></figure>
<h2 id="Docker客户端"><a href="#Docker客户端" class="headerlink" title="Docker客户端"></a>Docker客户端</h2><p>通过上边的介绍，我知道了Docker客户端是对Docker的镜像和容器进行创建、管理等的命令。</p>
<h3 id="镜像列表"><a href="#镜像列表" class="headerlink" title="镜像列表"></a>镜像列表</h3><p>在已经配置好了Docker client的环境之后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Docker images</span><br></pre></td></tr></table></figure>
<p>会列举出一堆本地已有的images，如图</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974199286490.jpg" alt=""></p>
<p>有时候会出现错误</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974124625644.jpg" alt=""></p>
<p>这是因为没有配置Docker client环境，配置步骤为</p>
<ol>
<li>Docker-machine env default </li>
<li>eval $(Docker-machine env default) 即可</li>
</ol>
<h3 id="制作镜像"><a href="#制作镜像" class="headerlink" title="制作镜像"></a>制作镜像</h3><p>只需要编写<code>Dockerfile</code>文件即可，具体的编写参考如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM hub.********.com/alphacloud/ac-base-6.7:v2.161206</span><br><span class="line">MAINTAINER ergou &lt;xxxx@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">USER root</span><br><span class="line">RUN mkdir -p /home/ergou</span><br><span class="line">ADD ./node-env-init.sh /home/ergou/</span><br><span class="line">RUN cd /home/ergou</span><br><span class="line">RUN su - ergou -c &quot;bash ./node-env-init.sh&quot;</span><br><span class="line">RUN su - ergou -c &quot;echo &apos;export PATH=/home/ergou/node-v4.4.7-linux-x64/bin:/home/ergou/phantomjs-2.1.1-linux-x86_64/bin:$PATH&apos; &gt;&gt; .bashrc&quot;</span><br><span class="line"></span><br><span class="line">EXPOSE 22</span><br><span class="line">CMD [&quot;/usr/sbin/sshd&quot;, &quot;-D&quot;]</span><br></pre></td></tr></table></figure>
<p>其中 ergou 是登录 Linux 系统的用户名，具备sudo权限。</p>
<ol>
<li>进入<code>Dockerfile</code>所在的文件夹。</li>
<li><code>docker build -t &#39;test-docker-images&#39; ./</code></li>
</ol>
<p>整个过程如图</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974203406455.jpg" alt=""></p>
<p>一两分钟之后可以看到image已经编译好了</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974205800552.jpg" alt=""></p>
<p><a href="https://github.com/zhangpeihao/LearningDocker/blob/master/manuscript/04-WriteDockerfile.md" target="_blank" rel="noopener">Dockerfile编写理论基础参考</a></p>
<h3 id="推送镜像"><a href="#推送镜像" class="headerlink" title="推送镜像"></a>推送镜像</h3><p>创建完Docker镜像之后，我希望这个镜像能够被很多人用上服务大众，那么就需要推送到registry就好比我们的npm包管理一样，也是要推动仓库下，具体步骤为</p>
<ol>
<li><code>docker login hub.********.com</code></li>
<li>打个标签，不打就是默认的<code>latest</code>标签，<code>docker tag test-Docker-images hub.********.com/ergou/test-Docker-images:v0.0.1</code></li>
</ol>
<p>过程如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974215364502.jpg" alt=""></p>
<p>PUSH完成</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974220138348.jpg" alt=""></p>
<p>在alphacloud平台上，就能看到我的镜像<br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974220668806.jpg" alt=""></p>
<h3 id="启动实例"><a href="#启动实例" class="headerlink" title="启动实例"></a>启动实例</h3><p>镜像只是一个模板，真正的Docker容器其实就是image的实例</p>
<p>启动命令为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Docker run -t -i hub.********.com/liujiangbei/test-Docker-images:v0.0.1 /bin/bash</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14974218724614.jpg" alt=""></p>
<p>这就通过我们自己创建的镜像启动了容器，我们看看这个容器里边都有啥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ergou@0b3e437a3336 ~]$ ll</span><br><span class="line">total 12</span><br><span class="line">-rwxr-xr-x 1 root   root   1853 Jun  8 17:48 node-env-init.sh</span><br><span class="line">drwxrwxr-x 7 ergou ergou 4096 Jun 14 14:04 node-v6.10.3-linux-x64</span><br><span class="line">drwxr-xr-x 4 root   root   4096 Jan 25  2016 phantomjs-2.1.1-linux-x86_64</span><br></pre></td></tr></table></figure>
<p>目录下有我们自己的Nodejs的内容。在容器里边做任何操作，一旦退出内容就销毁了。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ol start="3">
<li><a href="https://docs.Docker.com" target="_blank" rel="noopener">Docker官方文档</a></li>
<li><a href="https://github.com/zhangpeihao/LearningDocker/blob/master/manuscript/04-WriteDockerfile.md" target="_blank" rel="noopener">Dockerfile的编写指南</a></li>
<li><a href="https://blog.smdcn.net/article/1572.html" target="_blank" rel="noopener">Docker-machine取代boot2Docker</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/30/Git安装和配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/30/Git安装和配置/" class="post-title-link" itemprop="url">Git安装和配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-30 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-30T00:00:00+08:00">2017-03-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h1><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git-core</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure>
<h2 id="Setting"><a href="#Setting" class="headerlink" title="Setting"></a><a href="http://blog.csdn.net/alex_my/article/details/8741615" target="_blank" rel="noopener">Setting</a></h2><ol>
<li>生成ssh-key <code>sudo ssh-keygen -t rsa -C &quot;my first ssh-key&quot;</code> <a href="http://blog.csdn.net/alex_my/article/details/8741625" target="_blank" rel="noopener">参考地址</a> 可以不用加 <code>-C &quot;my first ssh-key&quot;</code> 这部分</li>
<li>使用vi命令查看生成的ssh_key.pub内容并复制添加到Github上面的SSH Key里面。</li>
<li>测试一下本地git跟github是否连接。</li>
</ol>
<p>ssh <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a> 会提示输入密码，也就是生成的ssh_key的密码，整个过程如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">parallels@ubuntu:~$ ssh git@github.com</span><br><span class="line">The authenticity of host &apos;github.com (192.30.252.130)&apos; can&apos;t be established.</span><br><span class="line">RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &apos;github.com,192.30.252.130&apos; (RSA) to the list of known hosts.</span><br><span class="line">PTY allocation request failed on channel 0</span><br><span class="line">Hi liujb! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br><span class="line">Connection to github.com closed.</span><br></pre></td></tr></table></figure>
<h1 id="Create-a-new-repository-on-the-command-line"><a href="#Create-a-new-repository-on-the-command-line" class="headerlink" title="Create a new repository on the command line"></a>Create a new repository on the command line</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">touch README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@github.com:liujb/c-study.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h1 id="Push-an-existing-repository-from-the-command-line"><a href="#Push-an-existing-repository-from-the-command-line" class="headerlink" title="Push an existing repository from the command line"></a>Push an existing repository from the command line</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:liujb/c-study.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h1 id="Basic-command"><a href="#Basic-command" class="headerlink" title="Basic command"></a>Basic command</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:liujb/xxoo-fe.git</span><br><span class="line">git status</span><br><span class="line">git add filename</span><br><span class="line">git rm filename</span><br><span class="line">git commit filename -m &quot;This is comment&quot;</span><br><span class="line">git pull origin master</span><br><span class="line">git push origin master</span><br><span class="line">git branch f-test-branch master -- 从master分之创建f-test-branch分支</span><br><span class="line">git checkout f-test-branch</span><br><span class="line">git branch</span><br><span class="line">git branch -d f-test-branch</span><br><span class="line">git merge --no-ff master -- 向前合并分支到主干</span><br><span class="line">git tag -a 0.1.1 -- 创建tag</span><br><span class="line">git reset --hard HEAD -- revert</span><br><span class="line">git reset --hard ORIG_HEAD -- revert the commit files</span><br><span class="line">git fetch origin -- fetch from server</span><br><span class="line">git reset --hard origin/master --</span><br></pre></td></tr></table></figure>
<h1 id="Git-branch-management"><a href="#Git-branch-management" class="headerlink" title="Git branch management"></a>Git branch management</h1><ul>
<li>主分支</li>
<li>主开发分支</li>
<li><p>临时性分支</p>
<ul>
<li>功能(feature)分支</li>
<li>预发布(release)分支</li>
<li>修补BUG(fixbug)分支</li>
</ul>
</li>
</ul>
<h1 id="Git-command"><a href="#Git-command" class="headerlink" title="Git command"></a>Git command</h1><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/Git_Cheat_Sheet.png" alt="sss"></p>
<h1 id="Some-Issues"><a href="#Some-Issues" class="headerlink" title="Some Issues"></a>Some Issues</h1><ol>
<li>OS X下git status中文会显示为编码的解决方案 <code>git config --global core.quotepath false</code></li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="http://blog.csdn.net/ithomer/article/details/7529022" target="_blank" rel="noopener">Git命令详解</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/30/Nodejs使用thrift官方示例上手操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/30/Nodejs使用thrift官方示例上手操作/" class="post-title-link" itemprop="url">Nodejs使用thrift官方示例上手操作</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-30 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-30T00:00:00+08:00">2017-03-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Nodejs使用thrift官方示例上手操作。</p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>虽然官方的示例已经足够简单清晰，为何我还多次一举？</p>
<ol>
<li>按照官方的例子上手起来多多少少还是会有坑。</li>
<li>看到的都是别人的写下来才是自己的。</li>
</ol>
<h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><ol>
<li>Mac OSX</li>
<li>Nodejs v7.4.0</li>
<li>thrift v0.10.0</li>
</ol>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li>下载并安装thrift</li>
<li>新建项目文件夹并增加package.json</li>
<li>撸码开干</li>
</ol>
<h2 id="下载并安装Thrift"><a href="#下载并安装Thrift" class="headerlink" title="下载并安装Thrift"></a>下载并安装Thrift</h2><p>Mac电脑下若安装了<a href="https://brew.sh" target="_blank" rel="noopener">brew</a>使用命令<code>brew install thrift</code>即可安装成功。</p>
<p>此时 <code>which thrift</code> 就能找到thrift的执行路径。<br>通过 <code>thrift -version</code> 查看thrift版本，若能出现下图则表示安装陈宫。<br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14879054042074/14879070682601.jpg" alt=""><br>否则辛苦Google搜索吧。</p>
<h2 id="撸码步骤"><a href="#撸码步骤" class="headerlink" title="撸码步骤"></a>撸码步骤</h2><h3 id="1-创建thrift源文件tutorial-thrift"><a href="#1-创建thrift源文件tutorial-thrift" class="headerlink" title="1. 创建thrift源文件tutorial.thrift"></a>1. 创建thrift源文件tutorial.thrift</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">namespace js tutorial</span><br><span class="line"></span><br><span class="line">service Calculator &#123;</span><br><span class="line">  void ping(),</span><br><span class="line">  i32 add(1:i32 num1, 2:i32 num2),</span><br><span class="line">  oneway void zip()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace [language] [namespace]</span><br></pre></td></tr></table></figure>
<h3 id="2-将thrift源文件编译成Nodejs"><a href="#2-将thrift源文件编译成Nodejs" class="headerlink" title="2. 将thrift源文件编译成Nodejs"></a>2. 将thrift源文件编译成Nodejs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thrift -r --gen js:node tutorial.thrift</span><br></pre></td></tr></table></figure>
<p>执行完成后，会出现两个文件<br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14879054042074/14879072402838.jpg" alt=""></p>
<h3 id="3-编写server-js"><a href="#3-编写server-js" class="headerlink" title="3. 编写server.js"></a>3. 编写server.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var thrift = require(&apos;thrift&apos;)</span><br><span class="line">var Calculator = require(&apos;./gen-nodejs/Calculator.js&apos;)</span><br><span class="line"></span><br><span class="line">var server = thrift.createServer(Calculator, &#123;</span><br><span class="line">  ping: function (result) &#123;</span><br><span class="line">    console.log(result)</span><br><span class="line">    result(null)</span><br><span class="line">  &#125;,</span><br><span class="line">  add: function (n1, n2, result) &#123;</span><br><span class="line">    result(null, n1 + n2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(9090)</span><br></pre></td></tr></table></figure>
<h3 id="4-编写client-js"><a href="#4-编写client-js" class="headerlink" title="4. 编写client.js"></a>4. 编写client.js</h3><p>代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var thrift = require(&apos;thrift&apos;)</span><br><span class="line">var Calculator = require(&apos;./gen-nodejs/Calculator&apos;)</span><br><span class="line"></span><br><span class="line">var transport = thrift.TBufferedTransport()</span><br><span class="line">var protocol = thrift.TBinaryProtocol()</span><br><span class="line"></span><br><span class="line">var connection = thrift.createConnection(&quot;localhost&quot;, 9090, &#123;</span><br><span class="line">  transport: transport,</span><br><span class="line">  protocol: protocol</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">connection.on(&apos;error&apos;, function (err) &#123;</span><br><span class="line">  console.log(111)</span><br><span class="line">  console.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">var client = thrift.createClient(Calculator, connection)</span><br><span class="line"></span><br><span class="line">client.ping(function (err, response) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    return console.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">  connection.end()</span><br><span class="line">  console.log(response)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">client.add(1, 5, function (err, response) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    return console.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">  connection.end()</span><br><span class="line">  console.log(response)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="执行步骤和效果"><a href="#执行步骤和效果" class="headerlink" title="执行步骤和效果"></a>执行步骤和效果</h2><ol>
<li>启动server <code>node server.js</code></li>
<li>执行client <code>node client.js</code></li>
</ol>
<p>效果如图</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14879054042074/14879074408902.jpg" alt=""></p>
<p>至此，Nodejs使用thrift的大致步骤和流程就OK，接下来我们看下Thrift的相关知识。项目源码 <a href="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14879054042074/node-thrift-test.tar.gz" target="_blank" rel="noopener">node-thrift-test.ta</a></p>
<h1 id="Thrift知识备忘"><a href="#Thrift知识备忘" class="headerlink" title="Thrift知识备忘"></a>Thrift知识备忘</h1><h2 id="thrift数据类型"><a href="#thrift数据类型" class="headerlink" title="thrift数据类型"></a>thrift数据类型</h2><h2 id="thrift协议栈"><a href="#thrift协议栈" class="headerlink" title="thrift协议栈"></a>thrift协议栈</h2><p><a href="https://thrift.apache.org/tutorial/nodejs" target="_blank" rel="noopener">官方示例</a><br><a href="http://zheming.wang/blog/2014/08/28/94D1F945-40EC-45E4-ABAF-3B32DFFE4043/" target="_blank" rel="noopener">Thrift详解</a><br><a href="https://www.andyteki.com/programming/2016/06/28/using-thrift-in-node.html" target="_blank" rel="noopener">参考链接</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/30/浏览器同源策略好跨域请求那些事/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/30/浏览器同源策略好跨域请求那些事/" class="post-title-link" itemprop="url">浏览器同源策略好跨域请求那些事</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-30 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-30T00:00:00+08:00">2017-03-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-01 22:42:29" itemprop="dateModified" datetime="2018-09-01T22:42:29+08:00">2018-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h1><p>是一种约定，他是浏览器最核心也是最基本的安全功能。</p>
<p>两个页面拥有相同的协议、端口、和主机那么这两个页面就属于同源，当然了IE有例外</p>
<ol>
<li>两个互相之间高度互信的域名，如公司域名（corporate domains），不遵守同源策略的限制</li>
<li>端口：IE未将端口号加入到同源策略的组成部分。</li>
</ol>
<p>在同源策略中有一个例外，脚本可以设置 <code>document.domain</code> 的值为当前域的一个后缀，如果这样做的话，短的域将作为后续同源检测的依据。例如，假设在 <code>http://store.company.com/dir/other.html</code> 中的一个脚本执行了下列语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.domain = &quot;company.com&quot;;</span><br></pre></td></tr></table></figure>
<p>这条语句执行之后，页面将会成功地通过对 <code>http://company.com/dir/page.html</code> 的同源检测。</p>
<p>使用document.domain是让子域访问其父域，需要同时将子域和父域的document.domain设置为相同的值。必须要这么做，即使是简单的将父域设置为其原来的值。没有这么做的话可能导致授权错误。</p>
<h1 id="跨域内嵌的资源"><a href="#跨域内嵌的资源" class="headerlink" title="跨域内嵌的资源"></a>跨域内嵌的资源</h1><ol>
<li>script</li>
<li>link</li>
<li>img</li>
<li>video和audio</li>
<li>object，embed，applet</li>
<li>@font-face</li>
<li>frame和iframe</li>
</ol>
<h1 id="实现跨域访问"><a href="#实现跨域访问" class="headerlink" title="实现跨域访问"></a>实现跨域访问</h1><h2 id="使用CORS来实现跨域访问"><a href="#使用CORS来实现跨域访问" class="headerlink" title="使用CORS来实现跨域访问"></a>使用CORS来实现跨域访问</h2><ol>
<li>简单请求，只需要设置 <code>Access-Control-Allow-Origin: *</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">预请求</a></li>
<li>附带凭证信息的请求<code>xml.withCredentials = true;</code>如果服务器端的响应中，如果没有返回<code>Access-Control-Allow-Credentials: true</code>的响应头，那么浏览器将不会把响应结果传递给发出请求的脚步程序，以保证信息的安</li>
</ol>
<h2 id="使用跨域内嵌资源实现"><a href="#使用跨域内嵌资源实现" class="headerlink" title="使用跨域内嵌资源实现"></a>使用跨域内嵌资源实现</h2><ol>
<li>JSONP</li>
<li>iframe</li>
<li>window.name</li>
<li>document.domain</li>
<li>location.hash</li>
<li>window.postMessage</li>
</ol>
<p><a href="https://github.com/rccoder/blog/issues/5?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="noopener">参考资料</a></p>
<h2 id="HTTP请求头"><a href="#HTTP请求头" class="headerlink" title="HTTP请求头"></a>HTTP请求头</h2><ol>
<li><code>Origin</code></li>
<li><code>Access-Control-Request-Method</code></li>
<li><code>Access-Control-Request-Headers</code></li>
</ol>
<h2 id="HTTP响应头"><a href="#HTTP响应头" class="headerlink" title="HTTP响应头"></a>HTTP响应头</h2><ol>
<li><code>Access-Control-Allow-Origin</code></li>
<li><code>Access-Control-Expose-Headers</code></li>
<li><code>Access-Control-Max-Age</code> 预请求的结果有效期是多久</li>
<li><code>Access-Control-Allow-Credentials</code> </li>
<li><code>Access-Control-Allow-Methods</code></li>
<li><code>Access-Control-Allow-Headers</code></li>
</ol>
<h1 id="跨域脚本API和跨域数据存储访问"><a href="#跨域脚本API和跨域数据存储访问" class="headerlink" title="跨域脚本API和跨域数据存储访问"></a>跨域脚本API和跨域数据存储访问</h1><ol>
<li><code>iframe.contentWindow</code>, <code>window.parent</code>, <code>window.open</code>, <code>window.opener</code> 允许文档之间相互引用，当两个文档的源不同时，这些引用方式将受到影响。可使用 <code>window.postMessage</code> 作为替代方案。</li>
<li><code>localStorage</code> 和 <code>indexedDB</code> 每个源拥有单独空间，不能跨域做读写操作。</li>
<li><code>window.name</code> 属性可以用来临时存储数据，支持跨域访问。</li>
<li><code>Cookies</code>使用不同的源定义方式。一个页面可以为本域和任何父域设置cookie，只要是父域不是公共后缀（public suffix）即可。Firefox和Chrome使用Public Suffix List决定一个域是否是一个公共后缀（public suffix）。不管使用哪个协议（HTTP/HTTPS）或端口号，浏览器都允许给定的域以及其任何子域名(sub-domains)来访问cookie。设置cookie时，你可以使用Domain，Path，Secure，和Http-Only标记来限定其访问性。读取cookie时，不会知晓它的出处。尽管使用安全的https连接，任何可见的cookie都是使用不安全的连接设置的。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/24/BABEL转码解惑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/24/BABEL转码解惑/" class="post-title-link" itemprop="url">BABEL转码解惑</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-24T00:00:00+08:00">2017-03-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>解决Nodejs异步问题的终极方案就是使用 async/await，但是每次在项目中配置都会或多或少有些问题，每次都会被几个组件</p>
<ol>
<li>babel-core</li>
<li>babel-polyfill</li>
<li>babel-preset-es2015</li>
<li>babel-preset-stage-0</li>
<li>babel-plugin-*</li>
</ol>
<p>搞的有点混淆不清，甚至不知所措，我们的项目环境利用expressjs搭建，不同程度的使用了es6甚至es7的语法特性和新的API，所以babel转码</p>
<p>我们先看下具体的CASE</p>
<h1 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h1><h2 id="nodejs-4-4-7"><a href="#nodejs-4-4-7" class="headerlink" title="nodejs 4.4.7"></a>nodejs 4.4.7</h2><h3 id="Case-1"><a href="#Case-1" class="headerlink" title="Case 1"></a>Case 1</h3><p>去掉 <code>app.js</code> 里边的 <code>// import &#39;babel-polyfill&#39;</code> 和 <code>// import &#39;babel-core/register&#39;</code>， <code>.babelrc</code>里边需要有plugins</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;es2015&quot;,</span><br><span class="line">        &quot;stage-0&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">        [&quot;transform-runtime&quot;, &#123; &quot;regenerator&quot;: true &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>带有async的代码正常能run起来。</p>
<h3 id="Case-2"><a href="#Case-2" class="headerlink" title="Case 2"></a>Case 2</h3><p>去掉 <code>app.js</code> 里边加上 <code>import &#39;babel-polyfill&#39;</code>，babel里边正常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;es2015&quot;,</span><br><span class="line">        &quot;stage-0&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>带有async的代码能正常run</p>
<blockquote>
<p><code>import &#39;babel-polyfill</code> 换成 <code>import &quot;babel-core/register&quot;</code>代码无法run起来，报错</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14886112498834/14901700891179.jpg" alt=""></p>
<h2 id="nodejs-v7-4-0"><a href="#nodejs-v7-4-0" class="headerlink" title="nodejs v7.4.0"></a>nodejs v7.4.0</h2><h3 id="Case-1-1"><a href="#Case-1-1" class="headerlink" title="Case 1"></a>Case 1</h3><p>app.js 中引入<code>import &#39;babel-polyfill&#39;</code></p>
<p>而 .babelrc 如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;es2015&quot;,</span><br><span class="line">        &quot;stage-0&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码能正常run起来。</p>
<blockquote>
<p>去掉 <code>import &#39;babel-polyfill&#39;</code> 或者替换为 <code>import &quot;babel-core/register&quot;</code> 代码均不能正常run</p>
</blockquote>
<h3 id="Case-2-1"><a href="#Case-2-1" class="headerlink" title="Case 2"></a>Case 2</h3><p>app.js 中去掉 <code>import &#39;babel-polyfill&#39;</code>，而 .babelrc 代码加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;es2015&quot;,</span><br><span class="line">        &quot;stage-0&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">        [&quot;transform-runtime&quot;, &#123; &quot;regenerator&quot;: true &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码可以正常run。</p>
<h1 id="得到结论"><a href="#得到结论" class="headerlink" title="得到结论"></a>得到结论</h1><p>如果需要使用async和await有两种方式，</p>
<ol>
<li>在程序的入口处第一行引入 <code>import babel-polyfill</code>.</li>
<li>或者使用babel转码的时候引入插件 <code>[&quot;transform-runtime&quot;, { &quot;regenerator&quot;: true }]</code></li>
</ol>
<h1 id="往下探索"><a href="#往下探索" class="headerlink" title="往下探索"></a>往下探索</h1><p>首先我们要搞清楚async和await属于es2016（es6实际上是2015年发布的，es6常被称为es2015，而es2016其实就是es7）的特性，Nodejs在实现标准版本的进程上相对浏览器侧要快，截止到nodejs6.x的版本上，想要使用async和await还需要babel的转码才能实现。</p>
<h2 id="还是看Case"><a href="#还是看Case" class="headerlink" title="还是看Case"></a>还是看Case</h2><p>例如如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">async function readFiles (fileName) &#123;</span><br><span class="line">  return new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.readFile(fileName, function(error, data) &#123;</span><br><span class="line">      if (error) reject(error)</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const start = async function() &#123;</span><br><span class="line">  const result = await readFiles(&apos;/Users/liujb/Desktop/aa.txt&apos;)</span><br><span class="line">  console.log(result.toString())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start()</span><br></pre></td></tr></table></figure>
<p>亲测在<code>v7.4.0</code>下报语法错误，在<code>v7.7.4</code>下能run。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14886112498834/14901725937633.jpg" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14886112498834/14901725032359.jpg" alt=""></p>
<h2 id="关于babel"><a href="#关于babel" class="headerlink" title="关于babel"></a>关于babel</h2><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14886112498834/14901727299238.jpg" alt=""><br><a href="http://www.ruanyifeng.com/blog/2016/01/babel.html" target="_blank" rel="noopener">from</a></p>
<p>以上内容还是很清晰的，通过babel转码会默认读取babelrc设定的规则，同时会运用相应的插件。</p>
<h2 id="关于插件"><a href="#关于插件" class="headerlink" title="关于插件"></a>关于插件</h2><h3 id="babel-register-and-babel-polyfill"><a href="#babel-register-and-babel-polyfill" class="headerlink" title="babel-register and babel-polyfill"></a>babel-register and babel-polyfill</h3><p>仔细阅读<a href="http://www.ruanyifeng.com/blog/2016/01/babel.html" target="_blank" rel="noopener">阮老师的博客</a></p>
<p>babel-register是一个钩子，会对require的js、es、jsx、es6后缀的文件进行转码，且不会对当前文件进行转码，而且是实时转码所以只适合开发阶段。</p>
<p>babel-polyfill对es6的API进行转码，bable只会对syntax进行转码。</p>
<h3 id="babel-plugin"><a href="#babel-plugin" class="headerlink" title="babel-plugin-*"></a>babel-plugin-*</h3><p>babel-plugin-* 代表了一系列的转码插件，如babel-plugin-transform-es2015-arrow-functions 用于转码 es6 中的箭头函数，babel-plugin-transform-async-to-generator 用于将 es7 中的 async 转成 generator。</p>
<h3 id="babel-preset"><a href="#babel-preset" class="headerlink" title="babel-preset-*"></a>babel-preset-*</h3><p>我们现在有了 babel-plugin 系列，可以按需配置自己想要的特性。但若是想搭个 es6 环境，一个个地配置各个插件，我猜你会疯掉。babel-preset 系列就可以满足我们的需求，babel-preset 系列打包了一组插件，类似于餐厅的套餐。如 babel-preset-es2015 打包了 es6 的特性，babel-preset-stage-0 打包处于 strawman 阶段的语法</p>
<h3 id="babel-plugin-transform-runtime"><a href="#babel-plugin-transform-runtime" class="headerlink" title="babel-plugin-transform-runtime"></a>babel-plugin-transform-runtime</h3><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14901741704474.jpg" alt=""></p>
<p>以上内容来源于<a href="https://github.com/brunoyang/blog/issues/20" target="_blank" rel="noopener">https://github.com/brunoyang/blog/issues/20</a></p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>这一路下来，发现了不少的好文章，终于解决了自己的一些困惑，还是那句废话知易行难，学习总是靠一点点坚持。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a href="http://stackoverflow.com/questions/33527653/babel-6-regeneratorruntime-is-not-defined-with-async-await" target="_blank" rel="noopener">http://stackoverflow.com/questions/33527653/babel-6-regeneratorruntime-is-not-defined-with-async-await</a></li>
<li><a href="http://stackoverflow.com/questions/28976748/regeneratorruntime-is-not-defined" target="_blank" rel="noopener">http://stackoverflow.com/questions/28976748/regeneratorruntime-is-not-defined</a></li>
<li><a href="https://www.zfanw.com/blog/babel-6.html" target="_blank" rel="noopener">https://www.zfanw.com/blog/babel-6.html</a></li>
<li><a href="http://babeljs.io/docs/plugins/transform-runtime/" target="_blank" rel="noopener">transform-runtime</a></li>
<li><a href="https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-runtime" target="_blank" rel="noopener">babel-plugin-transform-runtime</a></li>
<li><a href="https://github.com/lmk123/blog/issues/45" target="_blank" rel="noopener">https://github.com/lmk123/blog/issues/45</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/11/Expressjs配置加载器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/11/Expressjs配置加载器/" class="post-title-link" itemprop="url">Expressjs配置加载器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-11 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-11T00:00:00+08:00">2017-03-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h1><p>大家都知道在日常的研发过程中，我们的程序会有多套环境的运行情况，每套环境都会有相应的配置，比如数据库相应的配置在研发、测试、生产环境上一般都是不同的，如果大家在提测或上线前还需要临时来变更这些配置，说明框架层面还不完善，而且这样也很容易造成失误，Web程序这种失误还能勉强在短时间内修复，如果是Native的app，那就麻烦了…</p>
<p>使用过PHP的CodeIgniter的都知道，在该框架下的config文件夹下会自带2个文件夹<br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14889796051702/14889824330813.jpg" alt=""></p>
<p>而ci框架本身提供配置加载函数，<code>$this-&gt;config-&gt;load(&#39;filename&#39;);</code> 该函数针对当前程序运行的不同环境会加载不同环境下的配置。</p>
<p>目前在Nodejs的Expressjs生态中，这样的功能也有类似存在，比如<a href="https://github.com/JanUnld/confenv" target="_blank" rel="noopener">confenv</a>，<a href="https://github.com/plimble/envconfik/blob/master/index.js" target="_blank" rel="noopener">envconfik</a>，总体都不满足我们的需求。</p>
<h1 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h1><p>为了解决这个问题，我们还是自己简单快速造一个，其实不管怎么写代码都非常少，在构思的时候主要有两个思路</p>
<ol>
<li>使用middleware的方式</li>
<li>使用global的方式</li>
</ol>
<p>经过简单的思考，还是觉得采用global的方式，因为并非所有需要配置的场景都只是在req上边，可能在某个helper里边我需要使用配置文件。</p>
<h1 id="直接上码"><a href="#直接上码" class="headerlink" title="直接上码"></a>直接上码</h1><p><a href="https://github.com/liujb/Nodejs-env-conf" target="_blank" rel="noopener">这里</a></p>
<p>主要有两个模块，一个跟环境相关，另一个跟配置文件相关</p>
<h2 id="env-js"><a href="#env-js" class="headerlink" title="env.js"></a>env.js</h2><p>该模块提供三个方法</p>
<ol>
<li>init()</li>
<li>get()</li>
<li>set(env)</li>
</ol>
<p>从函数名就能轻易看出</p>
<ol>
<li><code>init()</code> 函数为初始化整个Nodejs进程执行的环境，其实就是指定<code>process.env.NODE_ENV</code>，跟<code>export NODE_ENV=&#39;xxx&#39;</code>效果类似，只不过有部分限制和安全检查。该函数会在程序入口被调用。该函数在初始化为preview的时候有不具备通用性，这是因为当前公司的上限平台限制。</li>
<li><code>get()</code> 获取当前Nodejs执行的环境。</li>
<li><code>set(env)</code> 设置当前Nodejs执行环境，有一些安全限制，比如生产环境下不允许设置为其他环境。</li>
</ol>
<p>代码在<a href="https://github.com/liujb/Nodejs-env-conf/blob/master/src/env.js" target="_blank" rel="noopener">这里</a></p>
<h2 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h2><p>该模块主要有3个方法，</p>
<ol>
<li><code>EnvConf</code> 构造函数，需要传递config的根目录。</li>
<li><code>init(configBaseDir)</code> 该函数用于初始化特定环境配置所需要的工作比如环境重置、文件检测和创建。</li>
<li><code>_load()</code> 该方法为内部方法，但是会装载到<code>global.$loadConf</code>上，最终暴露出来的为<code>$loadConf(&#39;configFileName&#39;)</code></li>
</ol>
<p>并且将<code>env.js</code>模块导出。</p>
<p>代码在<a href="https://github.com/liujb/Nodejs-env-conf/blob/master/src/index.js" target="_blank" rel="noopener">这里</a></p>
<h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>在程序的入口处执行一个init函数即可</p>
<ol>
<li>npm install</li>
<li>在根目录下创建<code>development</code>、 <code>test</code>、<code>preview</code>、<code>production</code>四个文件夹。根据需要不一定需要全有。</li>
<li>在程序的入口处，比如app.js，引入包<code>import { EnvConf } from &#39;mfe-node-env-conf&#39;</code></li>
<li>同时调用初始化<code>new EnvConf(config.root).init()</code></li>
</ol>
<p>如 app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./logger'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'babel-polyfill'</span></span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">'mfe-logger'</span></span><br><span class="line"><span class="keyword">import</span> couponsBatchCtrl <span class="keyword">from</span> <span class="string">'./app/controllers/coupons-batch'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; EnvConf &#125; <span class="keyword">from</span> <span class="string">'mfe-node-env-conf'</span></span><br><span class="line"><span class="keyword">new</span> EnvConf(config.root).init()</span><br><span class="line"></span><br><span class="line">process.on(<span class="string">'uncaughtException'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  logger.error(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br></pre></td></tr></table></figure>
<h2 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.use(<span class="string">'/test'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> env = $loadConf(<span class="string">'env.js'</span>)</span><br><span class="line">  res.json(env)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这样就直接OK了。</p>
<h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p>总体感觉这个东西还是比较简单，自己撸完码，再写个文档，同时往Github上一丢，还是挺舒爽的，还是那句话知易行难，编程这条漫漫路没有捷径，就是需要从一点点的实战中积累，总结和思考。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/08/利用expect命令自动登录服务器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/08/利用expect命令自动登录服务器/" class="post-title-link" itemprop="url">利用expect命令自动登录服务器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-08T00:00:00+08:00">2017-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="expect是什么"><a href="#expect是什么" class="headerlink" title="expect是什么"></a>expect是什么</h1><p>expect就是一套用来实现自动交互功能的软件。</p>
<p>在实际工作中，我们运行命令、脚本或程序时，这些命令、脚本或程序都需要从终端输入某些继续运行的指令，而这些输入都需要人为的手工进行。</p>
<p>而利用expect，则可以根据程序的提示，模拟标准输入提供给程序，从而实现自动化交互执行。这就是expect。</p>
<h1 id="expect基础"><a href="#expect基础" class="headerlink" title="expect基础"></a>expect基础</h1><p>日常使用expect的时候，主要有四个命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>spawn</td>
<td>启动新的进程</td>
</tr>
<tr>
<td>expect</td>
<td>从进程接收字符串</td>
</tr>
<tr>
<td>send</td>
<td>用于向进程发送字符串</td>
</tr>
<tr>
<td>interact</td>
<td>允许用户交互</td>
</tr>
</tbody>
</table>
<h1 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/expect</span><br><span class="line"></span><br><span class="line">spawn ssh xiaobei@10.94.xx.24x</span><br><span class="line">expect &quot;password&quot;</span><br><span class="line">send &quot;xxxxxxx\r&quot;</span><br><span class="line">interact</span><br></pre></td></tr></table></figure>
<p>效果如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14866954532712/14866970672983.gif" alt=""></p>
<ol>
<li>启动新进程发起<code>ssh</code>操作。</li>
<li>接收到需要<code>password</code>，同时向进程发送密码并换行。</li>
<li>退出自动化允许用户交互，</li>
</ol>
<p>至此自动登录到服务器就能实现，这在紧张的研发和问题处理过程中还是很有帮助的。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><a href="http://www.jellythink.com/archives/1470" target="_blank" rel="noopener">参考文章</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/28/ES6中Set学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/28/ES6中Set学习笔记/" class="post-title-link" itemprop="url">ES6中Set数据结构学习笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-28 00:00:00" itemprop="dateCreated datePublished" datetime="2017-02-28T00:00:00+08:00">2017-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很多时候很多东西你明明经常听说，也总以为自己都了解了，或者侥幸认为要用的时候再认真看看就不会有问题。事实和经验证明往往很多时候出问题出糗的就是这些东西…</p>
<h1 id="什么是Set"><a href="#什么是Set" class="headerlink" title="什么是Set"></a>什么是Set</h1><ul>
<li>它类似于数组，但是成员的值都是唯一的。</li>
<li>Set函数接受数组（或类似数组的对象）作为参数，用于初始化。</li>
<li>向Set中加入值不会发生类型转换，Set内部判断两个值是否相同的算法类似<code>===</code>（NaN除外）。这意味着两个对象总是不想等的。</li>
</ul>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var set = new Set([1, 2, 3, 1, 1, &apos;1&apos;])</span><br><span class="line">console.log(set.size)</span><br><span class="line">console.log(set)</span><br></pre></td></tr></table></figure>
<p>演示过程</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880292315716/set.gif" alt="set"></p>
<h1 id="Set实例的属性和方法"><a href="#Set实例的属性和方法" class="headerlink" title="Set实例的属性和方法"></a>Set实例的属性和方法</h1><h2 id="实利属性"><a href="#实利属性" class="headerlink" title="实利属性"></a>实利属性</h2><ol>
<li>Set.prototype.constructor – 构造函数，默认就是Set函数</li>
<li>Set.prototype.size – 返回实例的成员总数</li>
</ol>
<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><p>分为以下两类</p>
<h3 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h3><ol>
<li>add(el) – 添加某个值，返回Set结构本身。</li>
<li>delete(el) – 删除某个，返回bool，表示删除成功与否。</li>
<li>has(el) – 表示参数是否为Set的成员，用于判断数组内是否有该值。</li>
<li>clear() – 清除所有成员，没有返回值</li>
</ol>
<p>基本用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var set = new Set()</span><br><span class="line">set.add(1).add(&apos;2&apos;).add(3)</span><br><span class="line">set.delete(2)</span><br><span class="line">set.has(&apos;2&apos;)</span><br></pre></td></tr></table></figure>
<p>演示过程</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880292315716/14880308486506.gif" alt=""></p>
<p><code>Array.from</code>方法可以将Set结构转化为数组，利用该方法以及Set不唯一的特性，我们可以为数组快速去重</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function dedupe(array) &#123;</span><br><span class="line">	return Array.from(new Set(array))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dedupe([1, 2, 1, &apos;2&apos;, &apos;2&apos;]) // [ 1, 2, &apos;2&apos; ]</span><br></pre></td></tr></table></figure>
<p>但是该方法对数组的元素为object无效。</p>
<h3 id="遍历方法"><a href="#遍历方法" class="headerlink" title="遍历方法"></a>遍历方法</h3><ul>
<li>keys()</li>
<li>values()</li>
<li>entries()</li>
<li>forEach()</li>
</ul>
<h4 id="for-let-i-of-set"><a href="#for-let-i-of-set" class="headerlink" title="for (let i of set.)"></a>for (let i of set.)</h4><p>由于Set没有键名，只有键值（或者说键名和键值是同一个值），所以keys和values行为完全一致</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let set = new Set(&apos;R&apos;, &apos;A&apos;, &apos;B&apos;)</span><br><span class="line"></span><br><span class="line">// for (let item of set.keys()) &#123;</span><br><span class="line">for (let item of set.values()) &#123;</span><br><span class="line">	console.log(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// R</span><br><span class="line">// A</span><br><span class="line">// B</span><br></pre></td></tr></table></figure>
<p>Set实例默认可遍历，其默认遍历器生成函数就是他的values方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set.prototype[Symbol.iterator] === Set.prototype.values</span><br><span class="line"></span><br><span class="line">// true</span><br></pre></td></tr></table></figure>
<p>这意味</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (let v of set) console.log(v)</span><br><span class="line"></span><br><span class="line">// R </span><br><span class="line">// A </span><br><span class="line">// B</span><br></pre></td></tr></table></figure>
<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let set = new Set([1, 2, 3])</span><br><span class="line">set.forEach(function(v, k) &#123;</span><br><span class="line">	console.log(`$&#123;k&#125; =&gt; $&#123;v&#125;`)</span><br><span class="line">&#125;, null)</span><br></pre></td></tr></table></figure>
<p>其中第一个参数为处理函数，第二个参数表示绑定的this对象</p>
<h1 id="Set应用"><a href="#Set应用" class="headerlink" title="Set应用"></a>Set应用</h1><p>由于扩展运算符<code>...</code>内部使用<code>for...of</code>循环，所以也可以用于Set</p>
<h2 id="更便捷的数组去重"><a href="#更便捷的数组去重" class="headerlink" title="更便捷的数组去重"></a>更便捷的数组去重</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const array = [1, 1, 2, 2]</span><br><span class="line">let unique = [...new Set(array)]</span><br><span class="line"></span><br><span class="line">// [1, 2]</span><br></pre></td></tr></table></figure>
<p>这意味数组的map和filter也可以间接作用于Set了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let set = new Set([1, 2, 3])</span><br><span class="line">set = new Set([...set].map(x =&gt; x * 3))</span><br><span class="line">// [2, 6, 9]</span><br><span class="line"></span><br><span class="line">set = new Set([...set].filter(x =&gt; x &gt;= 2))</span><br><span class="line">// [2, 3]</span><br></pre></td></tr></table></figure>
<h2 id="利用Set求并集、交集、差集"><a href="#利用Set求并集、交集、差集" class="headerlink" title="利用Set求并集、交集、差集"></a>利用Set求并集、交集、差集</h2><p>let a = new Set([1, 2, 3])<br>let b = new Set([2, 3, 4])</p>
<p>并集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const union = new Set([...a, ..b])</span><br></pre></td></tr></table></figure>
<p>交集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const intersect = new Set([...a].filter(x =&gt; b.has(x)))</span><br></pre></td></tr></table></figure>
<p>差集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let diff = new Set([...a].filter(x =&gt; !b.has(x)))</span><br></pre></td></tr></table></figure>
<h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><p>如果想在遍历Set的同时改变Set的结构，目前没有直接的方法，只有两种变通方法</p>
<ol>
<li>利用原Set结构映射出一个新的结构，然后赋值给原来的Set。</li>
<li>利用Array.from方法。</li>
</ol>
<h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><blockquote>
<p>网络上这么多同类型的文章为何我还要多此一举？<br>看到的永远是别人的，写下来才是自己的，知易行难，日拱一卒，坚持比什么都重要！</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/26/ES6中Map学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/26/ES6中Map学习笔记/" class="post-title-link" itemprop="url">ES6中Map数据结构学习笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-26 00:00:00" itemprop="dateCreated datePublished" datetime="2017-02-26T00:00:00+08:00">2017-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很多东西就是要细细的品读然后做点读书笔记，心理才会踏实…</p>
<h1 id="什么是Map"><a href="#什么是Map" class="headerlink" title="什么是Map"></a>什么是Map</h1><p>Javascript对象本质上就是键值对的集合（Hash结构），但是键只能是字符串，这有一定的限制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var d = &#123;&#125;</span><br><span class="line">var ele = document.body</span><br><span class="line">d[ele] = &apos;This is body&apos;</span><br><span class="line">console.log(d[&apos;[object HTMLBodyElement]&apos;])</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880958442455.jpg" alt=""></p>
<p>上段代码的原意是将DOM节点作为对象<code>d</code>的键，由于对象只接受字符串，所以ele被自动转为<code>[object HTMLBodyElement]</code></p>
<blockquote>
<p>为了解决这种限制，ES6提供了Map数据结构，类似于对象，但是键的范围不限制于字符串，各类数据类型（包括对象）都可以作为键。</p>
</blockquote>
<h2 id="Map基本用法"><a href="#Map基本用法" class="headerlink" title="Map基本用法"></a>Map基本用法</h2><p>请看代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var m = new Map()</span><br><span class="line">m.set(&apos;hello&apos;, &apos;Hello guys&apos;).set(true, &apos;right&apos;).set(&#123;a: 1&#125;, &#123;a: 1&#125;)</span><br><span class="line"></span><br><span class="line">m.size</span><br><span class="line"></span><br><span class="line">m.get(&apos;hello&apos;)</span><br><span class="line">m.has(true)</span><br><span class="line">m.delete(true)</span><br><span class="line">m.has(true)</span><br></pre></td></tr></table></figure>
<p>演示过程如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880965012692.gif" alt=""></p>
<p>Map构造函数可以接收数组作为参数，该数组的成员是一个个表示键值对的数组，如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [ [&apos;name&apos;, &apos;liujiangbei&apos;], [&apos;title&apos;, &apos;屌丝男&apos;] ]</span><br><span class="line"></span><br><span class="line">var map = new Map(arr)</span><br><span class="line">console.log(map) // Map &#123; &apos;name&apos; =&gt; &apos;liujiangbei&apos;, &apos;title&apos; =&gt; &apos;屌丝男&apos; &#125;</span><br></pre></td></tr></table></figure>
<p>该过程就好比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var map = new Map()</span><br><span class="line">var arr = [ [&apos;name&apos;, &apos;liujiangbei&apos;], [&apos;title&apos;, &apos;屌丝男&apos;] ]</span><br><span class="line">arr.forEach(([key, value]) =&gt; map.set(key, value))</span><br></pre></td></tr></table></figure>
<p>另外需要特别注意，只有对同一个对象的引用，Map结构才将其视为同一个key。一定是内存地址是一样的两个值。</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880968797019.gif" alt=""></p>
<p>对同一个key进行set，后面的值会覆盖前边的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var m = new Map()</span><br><span class="line">m.set(&apos;123&apos;, &apos;123&apos;)</span><br><span class="line">m.set(&apos;123&apos;, &apos;3456&apos;)</span><br><span class="line">m.get(&apos;123&apos;)</span><br><span class="line">// 返回 3456</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Map的键实际上跟内存地址绑定，只要内存不一样，就视为两个key，这就解决了同名属性碰撞的问题，</p>
</blockquote>
<p>如果Map的键是简单类型（数字、字符串、布尔），则只要两个值严格相等，Map就将其视为同一个Key，虽然<code>NaN === NaN</code>为FALSE，但Map将其视为同一Key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let map = new Map()</span><br><span class="line">map.set(NaN, 123)</span><br><span class="line">map.get(NaN) // 123</span><br><span class="line"></span><br><span class="line">map.set(-0, &apos;Zero&apos;)</span><br><span class="line">map.get(+0) // Zero</span><br></pre></td></tr></table></figure>
<p>这个地方也要特别注意…</p>
<h2 id="Map实例属性和方法"><a href="#Map实例属性和方法" class="headerlink" title="Map实例属性和方法"></a>Map实例属性和方法</h2><h3 id="属性和方法"><a href="#属性和方法" class="headerlink" title="属性和方法"></a>属性和方法</h3><ol>
<li>size属性</li>
<li>set(k, v)</li>
<li>get(k)</li>
<li>has(k)</li>
<li>delete(k)</li>
<li>clear()</li>
</ol>
<h3 id="遍历方法"><a href="#遍历方法" class="headerlink" title="遍历方法"></a>遍历方法</h3><ol>
<li>keys()</li>
<li>values()</li>
<li>entries()</li>
<li>forEach()</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (let [k, v] of map.entries) &#123; console.log(k, v) &#125;</span><br></pre></td></tr></table></figure>
<p>等同于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (let [k, v] of map) &#123; console.log(k, v) &#125;</span><br></pre></td></tr></table></figure>
<p>因为表示Map结构的默认遍历器结构(<code>Symbol.iterator</code>)就是<code>entries</code>方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var map = new Map()</span><br><span class="line">console.log(map[Symbol.iterator] === map.entries)</span><br></pre></td></tr></table></figure>
<p>forEach()方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">map.forEach(function (key, value, map) &#123;</span><br><span class="line">	// do somethings</span><br><span class="line">	// this 指向 obj 对象</span><br><span class="line">&#125;, obj)</span><br></pre></td></tr></table></figure>
<h1 id="Map和Array等数据结构的化学反应"><a href="#Map和Array等数据结构的化学反应" class="headerlink" title="Map和Array等数据结构的化学反应"></a>Map和Array等数据结构的化学反应</h1><h2 id="Map和Array"><a href="#Map和Array" class="headerlink" title="Map和Array"></a>Map和Array</h2><p>前边讲到Map的构造函数接收数组，所以Map和Array之间的转化比较方便，但是也有一些约束。</p>
<h3 id="Array转Map"><a href="#Array转Map" class="headerlink" title="Array转Map"></a>Array转Map</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var arr = [[1, &apos;ext&apos;, &apos;1&apos;], [&apos;2&apos;, 2], [3, &apos;3&apos;, &apos;ext&apos;]]</span><br><span class="line">var map = new Map(arr)</span><br><span class="line">console.log(map)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880993959952.jpg" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880994432670.jpg" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880995017196.jpg" alt=""></p>
<p>可以看出数组转为Map需要满足，数组的元素为数组或者object。</p>
<h3 id="Map转Array"><a href="#Map转Array" class="headerlink" title="Map转Array"></a>Map转Array</h3><p>利用扩展运算符<code>...</code>很容易实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var arr = [</span><br><span class="line">	[&apos;1&apos;, &apos;111&apos;],</span><br><span class="line">	[2, [122, 122]],</span><br><span class="line">	[&apos;name&apos;, &apos;liujiangbei&apos;]</span><br><span class="line">]</span><br><span class="line">var map = new Map(arr)</span><br><span class="line"></span><br><span class="line">var keys = [...map.keys()]</span><br><span class="line">var values = [...map.values()]</span><br><span class="line">var entries = [...map.entries()]</span><br><span class="line">entries === [...map] // false</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880999317598.jpg" alt=""><br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14880999458305.jpg" alt=""></p>
<h3 id="利用Array的map和filter方法实现Map的map和filter特性"><a href="#利用Array的map和filter方法实现Map的map和filter特性" class="headerlink" title="利用Array的map和filter方法实现Map的map和filter特性"></a>利用Array的map和filter方法实现Map的map和filter特性</h3><p>Map本身并没有map和filter方法，由于数组和Map转换很方便所以利用数组的map的filter特性从而实现达到map和filter的特性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var arr = [[1, &apos;1&apos;], [2, &apos;222&apos;], [3, &apos;333&apos;]]</span><br><span class="line">var map = new Map(arr)</span><br><span class="line"></span><br><span class="line">new Map([...map].filter(([k, v]) =&gt; k &gt;= 1))</span><br><span class="line">new Map([...map].map( ([k, v]) =&gt; [k * 2, `Map_$&#123;v&#125;`] ))</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14881004645532.jpg" alt=""><br><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14881006857209.jpg" alt=""></p>
<h2 id="Map和Object"><a href="#Map和Object" class="headerlink" title="Map和Object"></a>Map和Object</h2><h3 id="Map转为Object"><a href="#Map转为Object" class="headerlink" title="Map转为Object"></a>Map转为Object</h3><p>如果Map的键全为字符串、数字、bool，则其可以转为对象，键非字符串的会通过.toString()方法转化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function mapToObj (map) &#123;</span><br><span class="line">	var obj = Object.create(null)</span><br><span class="line">	for (let [k, v] of map) &#123;</span><br><span class="line">		obj[k] = v</span><br><span class="line">	&#125;</span><br><span class="line">	return obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var map = new Map( [[1, &apos;1&apos;], [true, true], [&apos;111&apos;, &apos;111&apos;], [&#123;1: 1&#125;, 111] ])</span><br><span class="line">var obj = mapToObj(map)</span><br><span class="line">console.log(obj)</span><br><span class="line">console.log(typeof obj.true, obj.true)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14881012718271.jpg" alt=""></p>
<h3 id="Object转为Map"><a href="#Object转为Map" class="headerlink" title="Object转为Map"></a>Object转为Map</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function objToMap (obj) &#123;</span><br><span class="line">	let map = new Map()</span><br><span class="line">	for (let k of Object.keys(obj)) &#123;</span><br><span class="line">		map.set(k, obj[k])</span><br><span class="line">	&#125;</span><br><span class="line">	return map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objToMap(&#123;yes: true, no: false, 1: 11&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/14880951075186/14881013992708.jpg" alt=""></p>
<h2 id="Map和JSON"><a href="#Map和JSON" class="headerlink" title="Map和JSON"></a>Map和JSON</h2><h3 id="Map转为JSON"><a href="#Map转为JSON" class="headerlink" title="Map转为JSON"></a>Map转为JSON</h3><p>Map的键都是字符串，这是直接转为对象JSON</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSON.stringify(mapToObj(obj))</span><br></pre></td></tr></table></figure>
<p>Map的键有非字符串，这是可选择转为数组JSON</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSON.stringify([...map])</span><br></pre></td></tr></table></figure>
<h3 id="JSON转Map"><a href="#JSON转Map" class="headerlink" title="JSON转Map"></a>JSON转Map</h3><p>JSON都是字符串的方式，所以先通过<code>JSON.parse(jsonStr)</code>转为对象，然后通过上边的<code>objToMap</code>即可实现转化</p>
<p>有一种特殊情况，整个JSON就是一个数组，诶个数组成员又都是有两个成员的数组，他可以一一对应转为Map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new Map(JSON.parse(jsonStr))</span><br></pre></td></tr></table></figure>
<h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><blockquote>
<p>网络上这么多同类型的文章为何我还要多此一举？<br>看到的永远是别人的，写下来才是自己的，知易行难，日拱一卒，坚持比什么都重要！这句话送给大家也送给我自己…</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/16/Vim使用记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/16/Vim使用记录/" class="post-title-link" itemprop="url">vim使用记录</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-16 00:00:00" itemprop="dateCreated datePublished" datetime="2017-02-16T00:00:00+08:00">2017-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 23:04:45" itemprop="dateModified" datetime="2018-08-30T23:04:45+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="vim-info"><a href="#vim-info" class="headerlink" title="vim-info"></a>vim-info</h2><ol>
<li>vim文件存在 <code>/usr/share/vim/vim73</code></li>
<li>系统级别的vim配置文件在 <code>/usr/share/vim/vimrc</code></li>
<li>用户级别的vim配置在 <code>~/.vimrc</code></li>
</ol>
<h2 id="homebrew-install-vim"><a href="#homebrew-install-vim" class="headerlink" title="homebrew install vim"></a>homebrew install vim</h2><ol>
<li><code>/usr/local/Cellar/vim/7.4.430_1/share/vim/vim74</code></li>
</ol>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><ol>
<li><code>esc</code> – turn to command mode</li>
<li><code>i</code> – turn to edit mode and ready to insert in line</li>
<li><code>o</code> – turn to edit mode and ready to insert next line</li>
<li><code>h</code> – left</li>
<li><code>j</code> – down</li>
<li><code>k</code> – up</li>
<li><code>l</code> – right</li>
<li><code>^</code> – start in line</li>
<li><code>$</code> – end of line</li>
<li><code>dw</code> – delete word</li>
<li><code>dd</code> – delete line</li>
<li><code>yy</code> – copy line</li>
<li><code>p</code> – paste</li>
<li><code>e</code> – skip an word next</li>
<li><code>b</code> – skip an word previous</li>
<li><code>gg</code> – 移动到首行</li>
<li><code>G</code> – 移动到末行</li>
<li><code>V</code> – 进入Visual模式</li>
<li><p>进入Visual模式后</p>
<ol>
<li><code>d</code> – 删除所选</li>
<li><code>y</code> – 复制到0号寄存器，只能在打开的vim使用</li>
<li><code>+y</code> – 复制所选文件到1号寄存器，供其他程序使用。</li>
</ol>
</li>
<li><p>将选中的内容复制粘贴到另一个文件中</p>
<ol>
<li><code>y</code> 复制（在选中状态下）</li>
<li><code>:ex b</code> 转到b文件</li>
<li><code>p</code> 粘贴</li>
<li><code>:wq</code> 保存&amp;退出</li>
</ol>
</li>
<li><p><code>4m5</code> 将第4行移动到第5行</p>
</li>
</ol>
<h2 id="vim-diff"><a href="#vim-diff" class="headerlink" title="vim diff"></a>vim diff</h2><ol>
<li><code>dp</code> – switch left to right</li>
<li><code>dd</code> – delete one line</li>
</ol>
<h2 id="vim分屏幕"><a href="#vim分屏幕" class="headerlink" title="vim分屏幕"></a>vim分屏幕</h2><ol>
<li><code>vim -On file1 file2</code> – 垂直分屏</li>
<li><code>vim -on file1 file2</code> – 水平分屏</li>
</ol>
<h2 id="其他技巧"><a href="#其他技巧" class="headerlink" title="其他技巧"></a>其他技巧</h2><ol>
<li><code>set nu</code> – 查看行数</li>
<li><code>set fileencoding</code> – 查看文件编码</li>
<li><code>set fileencoding=utf-8</code> 设置文件编码为<code>utf8</code></li>
</ol>
<h2 id="vim全局替换"><a href="#vim全局替换" class="headerlink" title="vim全局替换"></a>vim全局替换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:[addr]s/src/dest/[option]</span><br></pre></td></tr></table></figure>
<p><code>[addr]</code> 表示检索范围，省略时表示当前行，其他取值为</p>
<ul>
<li><code>1，20</code> 表示从第1行到20行。</li>
<li><code>%</code> 表示整个文件，同 <code>1,$</code>。</li>
<li><code>. ,$</code> 从当前行到文件尾。</li>
</ul>
<p><code>s</code> 表示替换操作。</p>
<p><code>[option]</code> 表示操作类型，其取值为</p>
<ul>
<li>g 表示全局替换; </li>
<li>c 表示进行确认</li>
<li>p 表示替代结果逐行显示（Ctrl + L恢复屏幕）；</li>
</ul>
<p>如果在源字符串和目的字符串中出现特殊字符，需要用 <code>\</code> 转义</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>比如我要将某个文件中的<code>OneDrive</code>全部替换为<code>Dropbox</code>，替换命令为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/OneDrive/Dropbox/g</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="liujiangbei"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">liujiangbei</p>
  <div class="site-description" itemprop="description">This is description</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">186</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/liujb" title="GitHub → https://github.com/liujb" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liujiangbei88@gmail.com" title="Mail → mailto:liujiangbei88@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/PrivateGuess" title="Twitter → https://twitter.com/PrivateGuess" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liujiangbei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.7.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
