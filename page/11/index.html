<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This is description">
<meta property="og:type" content="website">
<meta property="og:title" content="liujb&#39;s blog">
<meta property="og:url" content="http://yoursite.com/page/11/index.html">
<meta property="og:site_name" content="liujb&#39;s blog">
<meta property="og:description" content="This is description">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="liujb&#39;s blog">
<meta name="twitter:description" content="This is description">

<link rel="canonical" href="http://yoursite.com/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>liujb's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liujb's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">About tech</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">186</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/liujb" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/CSS3之font-face属性介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/CSS3之font-face属性介绍/" class="post-title-link" itemprop="url">CSS3之font-face属性介绍</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="font-face简介"><a href="#font-face简介" class="headerlink" title="@font-face简介"></a>@font-face简介</h4><ol>
<li>@font-face是Css3的一个模块，主要作用是让我们可以使用自定义的字体，以往使用的字体必须要客户端存在，font-face让我们可以使用服务器端的字体。</li>
<li>兼容问题－－don’t worry！IE很早就支持了！！！</li>
</ol>
<h4 id="font-face语法"><a href="#font-face语法" class="headerlink" title="@font-face语法"></a>@font-face语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@font-face&#123;</span><br><span class="line">    font-family: YourDefinedName;</span><br><span class="line">    src: url(&apos;/static/your-path/xx.otf&apos;) format(&quot;opentype&quot;);</span><br><span class="line">    src: url(&apos;&apos;),</span><br><span class="line">        url(),</span><br><span class="line">        url(),</span><br><span class="line">        url(); //为了兼容不同的浏览器</span><br><span class="line">    font-weight: [normal|border];</span><br><span class="line">    font-style: [normal|italic]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="字体文件格式介绍"><a href="#字体文件格式介绍" class="headerlink" title="字体文件格式介绍"></a>字体文件格式介绍</h4><ol>
<li>otf</li>
<li>eot</li>
<li>woff</li>
<li>ttf</li>
<li>svg</li>
</ol>
<h4 id="使用-font-face的demo"><a href="#使用-font-face的demo" class="headerlink" title="使用@font-face的demo"></a>使用@font-face的demo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;@font-face属性demo&lt;/title&gt;</span><br><span class="line">	&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">		@font-face&#123;</span><br><span class="line">			font-family: WebFont;</span><br><span class="line">			src: url(&apos;/static/webapp/font/Fontin_Sans_R_45b.otf&apos;) format(&quot;opentype&quot;);</span><br><span class="line">			font-weight: 700;			</span><br><span class="line">		&#125;</span><br><span class="line">		h1&#123;</span><br><span class="line">			font-family: WebFont;</span><br><span class="line">			font-size: 60px;</span><br><span class="line">			text-align: center;</span><br><span class="line">			border: solid 1px #4488aa;</span><br><span class="line">			margin: 20px;</span><br><span class="line">			padding: 5px;</span><br><span class="line">		&#125;</span><br><span class="line">		address&#123;</span><br><span class="line">			font-family: WebFont;</span><br><span class="line">			font-size: 14px;</span><br><span class="line">			font-style: normal;</span><br><span class="line">			text-align: center;</span><br><span class="line">			margin: 20px;</span><br><span class="line">			padding: 5px;			</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1&gt;Cascading style sheets&lt;/h1&gt;</span><br><span class="line">	&lt;address&gt;This page use font-face ssss&lt;/address&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/QQ20140423-1.png" alt="字体效果"></p>
<h4 id="Icon-Font的优缺点"><a href="#Icon-Font的优缺点" class="headerlink" title="Icon Font的优缺点"></a>Icon Font的优缺点</h4><h5 id="Icon-Font-的优点"><a href="#Icon-Font-的优点" class="headerlink" title="Icon Font 的优点"></a>Icon Font 的优点</h5><ul>
<li>轻薄：Market项目中原icon图片背景27K（如果做成半透明发光，阴影效果会达到100K），目前全部用6K的字体代替。</li>
<li>丰满：并且添加hover，click等状态效果更灵活。</li>
<li>百搭：在不同的分辨率屏幕上适配缩放不失真！</li>
<li>安静：由于体积小，可实现通过base64编码能置于样式表内。从而没有了http请求。　　</li>
</ul>
<h5 id="Icon-Font-的缺点"><a href="#Icon-Font-的缺点" class="headerlink" title="Icon Font 的缺点"></a>Icon Font 的缺点</h5><ul>
<li>样式不如图片丰富。但是，我们有很多场景是用纯色icon，特别是在Windows 8这种Metro UI开始越来越多的时候。</li>
<li>文字渐变在Android平台上无法显示，在充满未知的将来一切或许都会后得到解决。</li>
<li>重构成本相应提高。熟练之后其实也充满乐趣。</li>
<li>页面重构越来越背离“切图”这个不准确的描述。用轻量级代码还原UI，优化设计稿是页面重构最核心的任务。</li>
</ul>
<h4 id="如何制作Icon-Font"><a href="#如何制作Icon-Font" class="headerlink" title="如何制作Icon Font"></a>如何制作Icon Font</h4><h4 id="Icon-Font与Data-URI"><a href="#Icon-Font与Data-URI" class="headerlink" title="Icon-Font与Data-URI"></a>Icon-Font与Data-URI</h4><h4 id="Icon-Font与Css-Sprites"><a href="#Icon-Font与Css-Sprites" class="headerlink" title="Icon-Font与Css-Sprites"></a>Icon-Font与Css-Sprites</h4><h4 id="Css-Sprite与Data-URI"><a href="#Css-Sprite与Data-URI" class="headerlink" title="Css-Sprite与Data-URI"></a>Css-Sprite与Data-URI</h4><h4 id="SVG字体图标"><a href="#SVG字体图标" class="headerlink" title="SVG字体图标"></a>SVG字体图标</h4><h4 id="有用的连接："><a href="#有用的连接：" class="headerlink" title="有用的连接："></a>有用的连接：</h4><ul>
<li><a href="http://www.qianduan.net/css3-icon-font-guide.html" target="_blank" rel="noopener">前端观察</a></li>
<li><a href="http://www.iconfont.cn/" target="_blank" rel="noopener">阿里巴巴iconfont库</a></li>
<li><a href="http://fontello.com/" target="_blank" rel="noopener">免费生成图标字体</a></li>
<li><a href="http://www.exljbris.com/fontinsans.html" target="_blank" rel="noopener">免费字体下载</a></li>
<li><a href="http://yife.im/web-design-icon-fonts-simple-way/" target="_blank" rel="noopener">网页设计图标字体的简单方法</a></li>
<li><a href="http://cube.qq.com/?p=476" target="_blank" rel="noopener">ICON字体的优缺点</a></li>
<li><a href="http://www.high-logic.com/font-editor/fontcreator.html" target="_blank" rel="noopener">FontCreator下载地址</a></li>
<li><a href="http://www.fontsquirrel.com/tools/webfont-generator" target="_blank" rel="noopener">WebFont-Generator</a></li>
<li><a href="http://fontawesome.io/" target="_blank" rel="noopener">Fontawesome for bootstroop</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/CSS3和JS动画的点滴/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/CSS3和JS动画的点滴/" class="post-title-link" itemprop="url">CSS3和JS动画的点滴</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 17:42:33" itemprop="dateModified" datetime="2018-08-30T17:42:33+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Css3-and-javascript-animation"><a href="#Css3-and-javascript-animation" class="headerlink" title="Css3-and-javascript-animation"></a>Css3-and-javascript-animation</h1><p><a href="http://www.html5cn.com.cn/web/css/2013-12-25/20335.html" target="_blank" rel="noopener">参考地址</a></p>
<h3 id="CSS3动画与JS"><a href="#CSS3动画与JS" class="headerlink" title="CSS3动画与JS"></a>CSS3动画与JS</h3><p>在现有的前端动画体系中，通常有两种模式：JS动画与CSS3动画。 JS动画是通过JS动态改写样式实现动画能力的一种方案，在PC端兼容低端浏览器中不失为一种推荐方案。 而在移动端，我们选择性能更优浏览器原生实现方案：CSS3动画</p>
<h4 id="目前对提升移动端CSS3动画体验的主要方法有几点："><a href="#目前对提升移动端CSS3动画体验的主要方法有几点：" class="headerlink" title="目前对提升移动端CSS3动画体验的主要方法有几点："></a>目前对提升移动端CSS3动画体验的主要方法有几点：</h4><h5 id="尽可能多的利用硬件能力，如使用3D变形来开启GPU加速，代码如下"><a href="#尽可能多的利用硬件能力，如使用3D变形来开启GPU加速，代码如下" class="headerlink" title="尽可能多的利用硬件能力，如使用3D变形来开启GPU加速，代码如下"></a>尽可能多的利用硬件能力，如使用3D变形来开启GPU加速，代码如下</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-webkit-transform: translate3d(0, 0, 0);</span><br><span class="line">-moz-transform: translate3d(0, 0, 0);</span><br><span class="line">-ms-transform: translate3d(0, 0, 0);</span><br><span class="line">transform: translate3d(0, 0, 0);</span><br></pre></td></tr></table></figure>
<h5 id="如动画过程有闪烁（通常发生在动画开始的时候），可以尝试下面的Hack："><a href="#如动画过程有闪烁（通常发生在动画开始的时候），可以尝试下面的Hack：" class="headerlink" title="如动画过程有闪烁（通常发生在动画开始的时候），可以尝试下面的Hack："></a>如动画过程有闪烁（通常发生在动画开始的时候），可以尝试下面的Hack：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-webkit-backface-visibility: hidden;</span><br><span class="line">-moz-backface-visibility: hidden;</span><br><span class="line">-ms-backface-visibility: hidden;</span><br><span class="line">backface-visibility: hidden;</span><br><span class="line">-webkit-perspective: 1000;</span><br><span class="line">-moz-perspective: 1000;</span><br><span class="line">-ms-perspective: 1000;</span><br><span class="line">perspective: 1000;</span><br></pre></td></tr></table></figure>
<h5 id="通过translate3d右移500px的动画流畅度会明显优于使用left属性："><a href="#通过translate3d右移500px的动画流畅度会明显优于使用left属性：" class="headerlink" title="通过translate3d右移500px的动画流畅度会明显优于使用left属性："></a>通过translate3d右移500px的动画流畅度会明显优于使用left属性：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#ball-1 &#123;</span><br><span class="line">transition: -webkit-transform .5s ease;</span><br><span class="line">-webkit-transform: translate3d(0, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">#ball-1.slidein &#123;</span><br><span class="line">-webkit-transform: translate3d(500px, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#ball-2 &#123;</span><br><span class="line">transition: left .5s ease;</span><br><span class="line">left：0;</span><br><span class="line">&#125;</span><br><span class="line">#ball-2.slidein &#123;</span><br><span class="line">left：500px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：3D变形会消耗更多的内存与功耗，应确实有性能问题时才去使用它，兼在权衡</p>
</blockquote>
<h5 id="尽可能少的使用box-shadows与gradients"><a href="#尽可能少的使用box-shadows与gradients" class="headerlink" title="尽可能少的使用box-shadows与gradients"></a>尽可能少的使用box-shadows与gradients</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">box-shadows与gradients往往都是页面的性能杀手，尤其是在一个元素同时都使用了它们，所以拥抱扁平化设计吧。</span><br><span class="line">尽可能的让动画元素不在文档流中，以减少重排</span><br><span class="line"></span><br><span class="line">position: fixed; －- 不推荐啊！</span><br><span class="line">position: absolute;</span><br></pre></td></tr></table></figure>
<h5 id="优化-DOM-layout-性能"><a href="#优化-DOM-layout-性能" class="headerlink" title="优化 DOM layout 性能"></a>优化 DOM layout 性能</h5><blockquote>
<p>这是两段能力上完全等同的代码，显式的差异正如我们所见，只有执行顺序的区别。但真是如此吗？下面是加了说明注释的代码，很好的阐述了其中的进一步差异：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 触发两次 layout</span><br><span class="line">var newWidth = aDiv.offsetWidth + 10; // Read</span><br><span class="line">aDiv.style.width = newWidth + &apos;px&apos;; // Write</span><br><span class="line">var newHeight = aDiv.offsetHeight + 10; // Read</span><br><span class="line">aDiv.style.height = newHeight + &apos;px&apos;; // Write</span><br><span class="line"></span><br><span class="line">// 只触发一次 layout</span><br><span class="line">var newWidth = aDiv.offsetWidth + 10; // Read</span><br><span class="line">var newHeight = aDiv.offsetHeight + 10; // Read</span><br><span class="line">aDiv.style.width = newWidth + &apos;px&apos;; // Write</span><br><span class="line">aDiv.style.height = newHeight + &apos;px&apos;; // Write</span><br><span class="line">//因为是连续的设置吗？</span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>从注释中可找到规律，连续的读取offsetWidth/Height属性与连续的设置width/height属性，相比分别读取设置单个属性可少触发一次layout。</li>
<li>从结论看似乎与执行队列有关，没错，这是浏览器的优化策略。所有可触发layout的操作都会被暂时放入 layout-queue 中，等到必须更新的时候，再计算整个队列中所有操作影响的结果，如此就可只进行一次的layout，从而提升性能。</li>
</ol>
</blockquote>
<p>关键一，可触发layout的操作，哪些操作下会layout的更新（也称为reflow或者relayout）？</p>
<p>我们从浏览器的源码实现入手，以开源Webkit/Blink为例， 对layout的更新，Webkit 主要通过 Document::updateLayout 与Document::updateLayoutIgnorePendingStylesheets 两个方法：</p>
<p>从 updateLayoutIgnorePendingStylesheets 方法的内部实现可知，其也是对 updateLayout 方法的扩展，并且在现有的 layout 更新模式中，大部分场景都是调用 updateLayoutIgnorePendingStylesheets 来进行layout的更新。</p>
<p>搜索 Webkit 实现中调用 updateLayoutIgnorePendingStylesheets 方法的代码, 得到以下可导致触发 layout 的操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">void Document::updateLayout()&#123;</span><br><span class="line">	ASSERT(isMainThread());</span><br><span class="line">	FrameView* frameView = view();</span><br><span class="line"></span><br><span class="line">	if (frameView &amp;amp;&amp;amp; frameView-&amp;gt;isInLayout()) &#123;</span><br><span class="line">		ASSERT_NOT_REACHED();</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line">	if (Element* oe = ownerElement())&#123;</span><br><span class="line">		oe-&amp;gt;document()-&amp;gt;updateLayout();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	updateStyleIfNeeded();</span><br><span class="line">	StackStats::LayoutCheckPoint layoutCheckPoint;</span><br><span class="line"></span><br><span class="line">	if (frameView &amp;amp;&amp;amp; renderer() &amp;amp;&amp;amp; (frameView-&amp;gt;layoutPending() || renderer()-&amp;gt;needsLayout()))&#123;</span><br><span class="line">		frameView-&amp;gt;layout();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (m_focusedNode &amp;amp;&amp;amp; !m_didPostCheckFocusedNodeTask) &#123;</span><br><span class="line">		postTask(CheckFocusedNodeTask::create());</span><br><span class="line">		m_didPostCheckFocusedNodeTask = true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Document::updateLayoutIgnorePendingStylesheets()&#123;</span><br><span class="line">	bool oldIgnore = m_ignorePendingStylesheets;</span><br><span class="line"></span><br><span class="line">	if (!haveStylesheetsLoaded()) &#123;</span><br><span class="line">		m_ignorePendingStylesheets = true;</span><br><span class="line">		HTMLElement* bodyElement = body();</span><br><span class="line"></span><br><span class="line">		if (bodyElement &amp;amp;&amp;amp; !bodyElement-&amp;gt;renderer() &amp;amp;&amp;amp; m_pendingSheetLayout == NoLayoutWithPendingSheets) &#123;</span><br><span class="line"></span><br><span class="line">			m_pendingSheetLayout = DidLayoutWithPendingSheets;</span><br><span class="line">			styleResolverChanged(RecalcStyleImmediately);</span><br><span class="line"></span><br><span class="line">		&#125;else if (m_hasNodesWithPlaceholderStyle)&#123;</span><br><span class="line">			recalcStyle(Force);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	updateLayout();</span><br><span class="line">	m_ignorePendingStylesheets = oldIgnore;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从 updateLayoutIgnorePendingStylesheets 方法的内部实现可知，其也是对 updateLayout 方法的扩展，并且在现有的 layout 更新模式中，大部分场景都是调用 updateLayoutIgnorePendingStylesheets 来进行layout的更新。</p>
<p>搜索 Webkit 实现中调用 updateLayoutIgnorePendingStylesheets 方法的代码, 得到以下可导致触发 layout 的操作：</p>
<p>Element:</p>
<ul>
<li>clientHeight,</li>
<li>clientLeft,</li>
<li>clientTop,</li>
<li>clientWidth,</li>
<li>focus(),</li>
<li>getBoundingClientRect(),</li>
<li>getClientRects(),</li>
<li>innerText,</li>
<li>offsetHeight,</li>
<li>offsetLeft,</li>
<li>offsetParent,</li>
<li>offsetTop,</li>
<li>offsetWidth,</li>
<li>outerText,</li>
<li>scrollByLines(),</li>
<li>scrollByPages(),</li>
<li>scrollHeight,</li>
<li>scrollIntoView(),</li>
<li>scrollIntoViewIfNeeded(),</li>
<li>scrollLeft,</li>
<li>scrollTop,</li>
<li>scrollWidth</li>
</ul>
<p>Frame, HTMLImageElement:</p>
<ul>
<li>height,</li>
<li>width</li>
</ul>
<p>Range:</p>
<ul>
<li>getBoundingClientRect(),</li>
<li>getClientRects()</li>
</ul>
<p>SVGLocatable:</p>
<ul>
<li>computeCTM(),</li>
<li>getBBox()</li>
</ul>
<p>SVGTextContent:</p>
<ul>
<li>getCharNumAtPosition(),</li>
<li>getComputedTextLength(),</li>
<li>getEndPositionOfChar(),</li>
<li>getExtentOfChar(),</li>
<li>getNumberOfChars(),</li>
<li>getRotationOfChar(),</li>
<li>getStartPositionOfChar(),</li>
<li>getSubStringLength(),</li>
<li>selectSubString()</li>
</ul>
<p>SVGUse:</p>
<ul>
<li>instanceRoot</li>
</ul>
<p>window:</p>
<ul>
<li>getComputedStyle(),</li>
<li>scrollBy(),</li>
<li>scrollTo(),</li>
<li>scrollX,</li>
<li>scrollY,</li>
<li>webkitConvertPointFromNodeToPage(),</li>
<li>webkitConvertPointFromPageToNode()</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/CodeIgniter框架hooks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/CodeIgniter框架hooks/" class="post-title-link" itemprop="url">CodeIgniter框架hooks</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 23:13:20" itemprop="dateModified" datetime="2018-08-30T23:13:20+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="CI的使用"><a href="#CI的使用" class="headerlink" title="CI的使用"></a>CI的使用</h3><p><a href="https://ellislab.com/codeigniter/user-guide/general/hooks.html" target="_blank" rel="noopener">CI-Hooks使用介绍</a></p>
<h3 id="挂载时机"><a href="#挂载时机" class="headerlink" title="挂载时机"></a>挂载时机</h3><h4 id="pre-system"><a href="#pre-system" class="headerlink" title="pre_system"></a>pre_system</h4><p>系统执行的早期调用.仅仅在benchmark 和 hooks 类 加载完毕的时候. 没有执行路由或者其它的过程.</p>
<h4 id="pre-controller"><a href="#pre-controller" class="headerlink" title="pre_controller"></a>pre_controller</h4><p>在调用你的任何控制器之前调用.此时所用的基础类,路由选择和安全性检查都已完成.</p>
<h4 id="post-controller-constructor"><a href="#post-controller-constructor" class="headerlink" title="post_controller_constructor"></a>post_controller_constructor</h4><p>在你的控制器实例化之后,任何方法调用之前调用.</p>
<h4 id="post-controller"><a href="#post-controller" class="headerlink" title="post_controller"></a>post_controller</h4><p>在你的控制器完全运行之后调用.</p>
<h4 id="display-override"><a href="#display-override" class="headerlink" title="display_override"></a>display_override</h4><p>覆盖_display()函数, 用来在系统执行末尾向web浏览器发送最终页面.这允许你用自己的方法来显示.注意，你需要通过 <code>$this-&gt;CI =&amp; get_instance()</code>引用 CI 超级对象，然后这样的最终数据可以通过调用<code>$this-&gt;CI-&gt;output-&gt;get_output()</code>来获得。</p>
<h4 id="cache-override"><a href="#cache-override" class="headerlink" title="cache_override"></a>cache_override</h4><p>可以让你调用自己的函数来取代output类中的_display_cache()函数.这可以让你使用自己的缓存显示方法</p>
<h4 id="post-system"><a href="#post-system" class="headerlink" title="post_system"></a>post_system</h4><p>在最终着色页面发送到浏览器之后,浏览器接收完最终数据的系统执行末尾调用<br>关于钩子的使用，手册上有详细的使用说明，截图如下：</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/CoffeeScript快速入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/CoffeeScript快速入门/" class="post-title-link" itemprop="url">CoffeeScript快速入门</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:16:57" itemprop="dateModified" datetime="2018-09-03T10:16:57+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="http://coffeescript.org/" target="_blank" rel="noopener">官方网站</a></p>
<h4 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h4><p>CoffeeScript is a little language that compiles into JavaScript.CoffeeScript is an attempt to expose the good parts of JavaScript in a simple way.</p>
<h4 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g coffee-script</span><br></pre></td></tr></table></figure>
<p>必须先安装npm包管理器，windows平台下nodejs自带npm，安装完成后可以使用<code>coffee</code>Start the CoffeeScript REPL</p>
<h4 id="编译-coffee文件为-js文件"><a href="#编译-coffee文件为-js文件" class="headerlink" title="编译.coffee文件为.js文件"></a>编译.coffee文件为.js文件</h4><ul>
<li><code>coffee --compile --output lib/ src/</code>将src目录下所有的coffee文件编译成lib目录树下所有js文件</li>
</ul>
<h4 id="在Sublimtext中设置coffee环境"><a href="#在Sublimtext中设置coffee环境" class="headerlink" title="在Sublimtext中设置coffee环境"></a>在Sublimtext中设置coffee环境</h4><ol>
<li><code>Install Package</code>输入CoffeeScript，这就是安装了高亮语法显示。</li>
<li>打开<code>C:\Users\Jiangbei\AppData\Roaming\Sublime Text 2\Packages\CoffeeScript</code>下的<code>CoffeeScript.sublime-build</code></li>
<li><p>将以下代码拷贝到’CoffeeScript.sublime-build’文件内，注意coffee.cmd的路径</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;cmd&quot;: [&quot;C:\\Users\\Jiangbei\\AppData\\Roaming\\npm\\coffee.cmd&quot;,&quot;-c&quot;,&quot;$file&quot;],</span><br><span class="line">    &quot;file_regex&quot;: &quot;^(*?):([0-9]*):?([0-9]*)&quot;,</span><br><span class="line">    &quot;selector&quot;: &quot;source.coffee&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ctrl+B就可以将.coffee文件编译成.js文件了。</p>
</li>
</ol>
<h4 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">square = (x) -&gt; x * x</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Dom命名规范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Dom命名规范/" class="post-title-link" itemprop="url">Dom命名规范</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:13:57" itemprop="dateModified" datetime="2018-09-03T10:13:57+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="DOM元素命名规则后续补进"><a href="#DOM元素命名规则后续补进" class="headerlink" title="DOM元素命名规则后续补进"></a>DOM元素命名规则后续补进</h3><h4 id="input-gt-txt"><a href="#input-gt-txt" class="headerlink" title="input-&gt;txt"></a>input-&gt;txt</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&apos;text&apos; id=&apos;txt-xx&apos;&gt;</span><br><span class="line">var txtXX = document.getElementById(&apos;txt-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="input-gt-hid"><a href="#input-gt-hid" class="headerlink" title="input-&gt;hid"></a>input-&gt;hid</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&apos;hidden&apos; id=&apos;hid-xx&apos;&gt;</span><br><span class="line">var hidXX = document.getElementById(&apos;hid-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="a-gt-lnk"><a href="#a-gt-lnk" class="headerlink" title="a-&gt;lnk"></a>a-&gt;lnk</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&apos;http://www.baidu.com&apos; id=&apos;lnk-Baidu&apos; &gt;baidu&lt;/a&gt;</span><br><span class="line">var lnkBaidu = document.getElementById(&apos;lnk-Baidu);</span><br></pre></td></tr></table></figure>
<h4 id="a-gt-btn"><a href="#a-gt-btn" class="headerlink" title="a-&gt;btn"></a>a-&gt;btn</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&apos;#&apos; id=&apos;btn-xx&apos;&gt;立即兑换&lt;/a&gt;</span><br><span class="line">var btnXX = document.getElementById(&apos;txt-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="input-gt-btn"><a href="#input-gt-btn" class="headerlink" title="input-&gt;btn"></a>input-&gt;btn</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&apos;button&apos; id=&apos;btn-xx&apos; value=&apos;Click Me&apos; /&gt;</span><br><span class="line">var btnXX = document.getElementById(&apos;btn-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="label-gt-lbl"><a href="#label-gt-lbl" class="headerlink" title="label-&gt;lbl"></a>label-&gt;lbl</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label for=&quot;&quot; id=&quot;lbl-xxx&quot;&gt;This is label text &lt;/label&gt;</span><br><span class="line">var lblXxx = document.getElementById(&apos;lbl-xxx);</span><br></pre></td></tr></table></figure>
<h4 id="div-gt-dv"><a href="#div-gt-dv" class="headerlink" title="div-&gt;dv"></a>div-&gt;dv</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;dv-xxx&quot;&gt;&lt;/div&gt;</span><br><span class="line">var dvXxx = document.getElementById(&apos;dv-xxx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="span-sp"><a href="#span-sp" class="headerlink" title="span-sp"></a>span-sp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span id=&quot;sp-xx&quot;&gt;&lt;/span&gt;</span><br><span class="line">var spXxx = document.getElementById(&apos;sp-xxx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="p-gt-p"><a href="#p-gt-p" class="headerlink" title="p-&gt;p"></a>p-&gt;p</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p id=&quot;p-xx&quot;&gt;&lt;/p&gt;</span><br><span class="line">var pXX = document.getElementById(&apos;p-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="section-sct"><a href="#section-sct" class="headerlink" title="section-sct"></a>section-sct</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;section id=&quot;sct-xx&quot;&gt;&lt;/section&gt;</span><br><span class="line">var sctXX = document.getElementById(&apos;sct-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="ul-gt-ul"><a href="#ul-gt-ul" class="headerlink" title="ul-&gt;ul"></a>ul-&gt;ul</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=&quot;ul-xx&quot;&gt;&lt;/ul&gt;</span><br><span class="line">var ulXx = document.getElementById(&apos;ul-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="li-gt-li"><a href="#li-gt-li" class="headerlink" title="li-&gt;li"></a>li-&gt;li</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;li id=&quot;li-xx&quot;&gt;&lt;/li&gt;</span><br><span class="line">var liXx = document.getElementById(&apos;li-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="select-gt-sel"><a href="#select-gt-sel" class="headerlink" title="select-&gt;sel"></a>select-&gt;sel</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;select name=&quot;&quot; id=&quot;sel-xx&quot;&gt;&lt;/select&gt;</span><br><span class="line">var selXo = document.getElementById(&apos;sel-xx&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="option-gt-opt"><a href="#option-gt-opt" class="headerlink" title="option-&gt;opt"></a>option-&gt;opt</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;option value=&quot;&quot; id=&quot;opt-xx&quot;&gt;&lt;/option&gt;</span><br><span class="line">var optXX = document.getElementById(&apos;opt-xx&apos;);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Geohash介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Geohash介绍/" class="post-title-link" itemprop="url">Geohash介绍</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Geohash介绍"><a href="#Geohash介绍" class="headerlink" title="Geohash介绍"></a>Geohash介绍</h3><p>Geohash是一种地址编码，能把二维的经纬度编码成字符串，某一区域范围内的经纬度是一致的，其中有编码长度控制区域的范围 <a href="https://segmentfault.com/a/1190000002513514" target="_blank" rel="noopener">精度参考</a></p>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><h4 id="实时LBS应用"><a href="#实时LBS应用" class="headerlink" title="实时LBS应用"></a>实时LBS应用</h4><p>LBS应用中，搜索某某(地点) <strong>附近</strong> 的什么(地点)，重点在于附近，如果没有<code>Geohash</code>算法，你可能需要做。</p>
<ol>
<li>圈定经度在某范围</li>
<li>圈定纬度在某范围</li>
<li>一般还会加上时间来做匹配</li>
</ol>
<p>在数据量不多的时候这个方案确实可行，可是一旦数据量上去之后，这个方式别说实时应用甚至连离线场景都不合适。另外基本上应用基于LBS后，数据都是海量的。</p>
<p>所以通过对经纬度做<code>Geohash</code>成为字符串后，然后对该字符串以及时间在数据库中添加索引，再加上业内最常用的分库分表，即使海量基于LBS方面的数据实时查询也成为可行。</p>
<h4 id="地理位置信息回溯"><a href="#地理位置信息回溯" class="headerlink" title="地理位置信息回溯"></a>地理位置信息回溯</h4><p>某打车公司，偶尔需要配合公安破案以及xx方面诉求的数据回溯，<code>要调出某一时间段某一地区所有司机的信息</code>，由于司机是实时上报坐标，数据量异常之大(日均几百G的，约500亿记录)</p>
<p>如果利用常规的圈定经度，纬度，时间范围的方式来查询根本不可行，所以利用Geohash在Hadoop中去查询的方式使得从大量数据中回溯特定数据方案可行。</p>
<p>当然这种诉求还有更佳的解决方案来做，由于并非高频需求，目前只是简单入<code>Hive</code>然后离线跑数据</p>
<h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><p>下边简单介绍在<code>python</code>和<code>php</code>中使用<code>Geohash</code>，以及遇到的问题</p>
<h4 id="python"><a href="#python" class="headerlink" title="python"></a>python</h4><p><a href="https://code.google.com/p/python-geohash/" target="_blank" rel="noopener">推荐使用</a><code>Google</code>上边的这个包，Download下来之后，解压到任意位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">16:02 liujb@localhost /Users/liujb/Dropbox/Didi/python-geohash</span><br><span class="line">% ll</span><br><span class="line">total 104</span><br><span class="line">-rw-r--r--@ 1 liujb  staff    25B Jan 15 15:14 MANIFEST.in</span><br><span class="line">-rw-r--r--@ 1 liujb  staff   3.7K Jan 15 15:14 README</span><br><span class="line">-rw-r--r--@ 1 liujb  staff    14K Jan 15 15:14 geohash.py</span><br><span class="line">-rw-r--r--@ 1 liujb  staff    11K Jan 15 15:15 geohash.pyc</span><br><span class="line">-rw-r--r--@ 1 liujb  staff   3.3K Jan 15 15:14 jpgrid.py</span><br><span class="line">-rw-r--r--@ 1 liujb  staff   2.1K Jan 15 15:14 jpiarea.py</span><br><span class="line">-rw-r--r--@ 1 liujb  staff   2.6K Jan 15 15:14 quadtree.py</span><br><span class="line">-rw-r--r--@ 1 liujb  staff   525B Jan 15 15:14 setup.py</span><br><span class="line">drwxr-xr-x@ 6 liujb  staff   204B Jan 15 15:14 src</span><br><span class="line">drwxr-xr-x@ 7 liujb  staff   238B Jan 15 15:14 test</span><br></pre></td></tr></table></figure>
<p>然后在该目录</p>
<ol>
<li>输入<code>python</code>，进入<code>python</code>环境，</li>
<li>输入<code>import geohash</code>，导入geohash包</li>
<li><code>print geohash.encode(30.725014, 104.257957)</code></li>
<li>得到<code>wm6nu3q64mxr</code></li>
</ol>
<p>整个过程如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">% python</span><br><span class="line">Python 2.7.11 (default, Dec 12 2015, 20:37:07) </span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import geohash</span><br><span class="line">&gt;&gt;&gt; print geohash.encode(30.725014, 104.257957)</span><br><span class="line">wm6nu3q64mxr</span><br><span class="line">&gt;&gt;&gt; print geohash.encode(30.725014, 104.257957, 5)</span><br><span class="line">wm6nu</span><br><span class="line">&gt;&gt;&gt; print geohash.encode(30.735014, 104.267957)</span><br><span class="line">wm6nuejs7mzg</span><br></pre></td></tr></table></figure>
<p>看得出 <code>30.725014, 104.257957</code> 和 <code>30.735014, 104.267957</code> 的hash值分别是<code>wm6nu3q64mxr</code>, <code>wm6nuejs7mzg</code></p>
<blockquote>
<p>两个字符串的前5位相同，两个地点相隔大约2公里左右</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/QQ20160115-0@2x.png" alt=""></p>
<p>注意遇到的坑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print geohash.encode(104.257957， 30.725014, 5)</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1</span><br><span class="line">    print geohash.encode(104.257957， 30.725014, 5)</span><br><span class="line">                                   ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line">&gt;&gt;&gt; print geohash.encode(104.257957, 30.725014, 5)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;geohash.py&quot;, line 79, in encode</span><br><span class="line">    raise Exception(&quot;invalid latitude.&quot;)</span><br><span class="line">Exception: invalid latitude.</span><br></pre></td></tr></table></figure>
<p>这是因为经纬度弄反了，所以<code>geohash.encode()</code>第一个参数是纬度，第二个参数是经度，第三个参数是编码长度。这个坑是因为一开始使用的是<a href="https://github.com/vinsci/geohash" target="_blank" rel="noopener">vinsci</a>这个包，该包经纬度弄反了不会报错，也是会出来一个编码。当时并没有注意到该环节，导致匹配了很多很远的经纬度数据</p>
<h4 id="php"><a href="#php" class="headerlink" title="php"></a>php</h4><p><a href="https://github.com/thephpleague/geotools" target="_blank" rel="noopener">参考此处</a></p>
<h3 id="本文参考"><a href="#本文参考" class="headerlink" title="本文参考"></a>本文参考</h3><ul>
<li><a href="http://www.cnblogs.com/LBSer/p/3310455.html" target="_blank" rel="noopener">Geohash核心原理解析</a></li>
<li><a href="https://segmentfault.com/a/1190000002513514" target="_blank" rel="noopener">Geohash精度问题参考</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Git代码回滚/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Git代码回滚/" class="post-title-link" itemprop="url">Git代码回滚</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-04 16:56:48" itemprop="dateModified" datetime="2020-03-04T16:56:48+08:00">2020-03-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><h4 id="Git-介绍"><a href="#Git-介绍" class="headerlink" title="Git 介绍"></a>Git 介绍</h4><p><img src="https://cdn.jsdelivr.net/gh/liujb/imgbed/img/git-xx.jpg" alt="git"></p>
<h4 id="从缓存区撤销"><a href="#从缓存区撤销" class="headerlink" title="从缓存区撤销"></a>从缓存区撤销</h4><h5 id="从缓存区撤销所有文件"><a href="#从缓存区撤销所有文件" class="headerlink" title="从缓存区撤销所有文件"></a>从缓存区撤销所有文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard head</span><br></pre></td></tr></table></figure>
<h5 id="从缓存区撤销指定文件"><a href="#从缓存区撤销指定文件" class="headerlink" title="从缓存区撤销指定文件"></a>从缓存区撤销指定文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- filename</span><br></pre></td></tr></table></figure>
<h4 id="Commit-后撤销"><a href="#Commit-后撤销" class="headerlink" title="Commit 后撤销"></a>Commit 后撤销</h4><h5 id="创建新的commit来修复"><a href="#创建新的commit来修复" class="headerlink" title="创建新的commit来修复"></a>创建新的commit来修复</h5><p>撤销到上个版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD</span><br></pre></td></tr></table></figure>
<p>撤销到上上个版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD^</span><br></pre></td></tr></table></figure>
<p>撤销到指定版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert commitNameReference</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ol>
<li>如果撤销有冲突的话会提示手动解决conflicts</li>
<li><code>git revert</code> 不会直接commit，还需要手动执行<code>git commint</code></li>
<li>这种情况适合已经把代码发布后。</li>
</ol>
<h5 id="修改老的commit"><a href="#修改老的commit" class="headerlink" title="修改老的commit"></a>修改老的commit</h5><p>git commit现在支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>
<p>这样可以修改刚才的这个提交，还可以添加新的文件和更改注释。另外，如果你的代码还没有发布，还可以使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i</span><br></pre></td></tr></table></figure>
<p>过程来修改。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Golang中make和new的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Golang中make和new的区别/" class="post-title-link" itemprop="url">Golang中make和new的区别</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 19:56:47" itemprop="dateModified" datetime="2018-08-30T19:56:47+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Golang-make-new-and-array-slice-difference-md"><a href="#Golang-make-new-and-array-slice-difference-md" class="headerlink" title="Golang-make-new-and-array-slice-difference.md"></a>Golang-make-new-and-array-slice-difference.md</h1><p>简单记录一下<code>golang</code>中一些容易混淆点</p>
<ol start="2">
<li><code>array</code>和<code>slice</code>的区别</li>
<li><code>make()</code>和<code>new()</code>的区别</li>
</ol>
<h3 id="array-和-slice的区别"><a href="#array-和-slice的区别" class="headerlink" title="array 和 slice的区别"></a>array 和 slice的区别</h3><h4 id="array"><a href="#array" class="headerlink" title="array"></a>array</h4><h5 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array := [...]int&#123;1,2,3&#125;</span><br></pre></td></tr></table></figure>
<p>三个点表示数组长度由元素个数推导而来</p>
<ol>
<li>array是值类型，在函数间传递的时候传递的是副本而不是指针。</li>
<li>数组的长度是不可变的，长度由<code>len()</code>获得。</li>
</ol>
<h4 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h4><h5 id="定义slice"><a href="#定义slice" class="headerlink" title="定义slice"></a>定义slice</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">slice := []int&#123;1,2,3&#125;</span><br><span class="line">slice2 := make([]int, 10, 20)</span><br><span class="line"></span><br><span class="line">slice = append(slice, 4, 5)</span><br><span class="line">subSlice = slice[1:2]</span><br></pre></td></tr></table></figure>
<ol>
<li>slice的长度是可变的，在append的过程中还有可能造成cap变化</li>
<li>slice是引用类型。</li>
<li>cap(), len(), copy(), append()</li>
</ol>
<h3 id="make-和-new的区别"><a href="#make-和-new的区别" class="headerlink" title="make 和 new的区别"></a>make 和 new的区别</h3><p><a href="http://golang.org/pkg/builtin/#new" target="_blank" rel="noopener">new-doc</a><br><a href="http://golang.org/pkg/builtin/#make" target="_blank" rel="noopener">make-doc</a></p>
<h4 id="new"><a href="#new" class="headerlink" title="new()"></a>new()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func new(Type) *Type</span><br></pre></td></tr></table></figure>
<p><code>new()</code>主要用来分配内存，第一个参数是类型，返回指向新分配类型零值的指针。</p>
<h4 id="make"><a href="#make" class="headerlink" title="make()"></a>make()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func make(Type, size IntegerType) Type</span><br></pre></td></tr></table></figure>
<p><code>make()</code> 用来为，<code>slice</code>，<code>map</code>，<code>channel</code> 类型分配内存和初始化对象，第一个参数也是类型而不是一个值，但是<code>make</code>返回类型是引用而不是指针</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Golang使用protobuf示例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Golang使用protobuf示例/" class="post-title-link" itemprop="url">Golang使用protobuf示例</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:14:56" itemprop="dateModified" datetime="2018-09-03T10:14:56+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Download-the-protobuf-protobuf"><a href="#Download-the-protobuf-protobuf" class="headerlink" title="Download the protobuf protobuf"></a>Download the protobuf <a href="https://developers.google.com/protocol-buffers/docs/downloads" target="_blank" rel="noopener">protobuf</a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd protobuf</span><br><span class="line">./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>完事后就有了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ ⌚ 21:20:01</span><br><span class="line">$ which protoc</span><br><span class="line">/usr/local/bin/protoc</span><br></pre></td></tr></table></figure>
<p>这就说明<code>protobuf</code>安装成功.</p>
<h4 id="get-protoc-gen-go"><a href="#get-protoc-gen-go" class="headerlink" title="get protoc-gen-go"></a>get protoc-gen-go</h4><p>获取 goprotobuf 提供的 Protobuf 编译器插件 protoc-gen-go（放到<code>$GOPATH/bin</code>下，<code>$GOPATH/bin</code>应该被加入<code>PATH</code>环境变量，以便<code>protoc</code>能够找到<code>protoc-gen-go</code>）   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/golang/protobuf/protoc-gen-go</span><br></pre></td></tr></table></figure>
<p>此插件被<code>protoc</code>使用，用于编译<code>.proto</code>文件为<code>Golang</code>源文件，通过此源文件可以使用定义在<code>.proto</code>文件中的消息。</p>
<h4 id="get-proto"><a href="#get-proto" class="headerlink" title="get proto"></a>get proto</h4><p>proto是 goprotobuf 提供的支持库，包含诸如编码（marshaling）、解码（unmarshaling）等功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/golang/protobuf/proto</span><br></pre></td></tr></table></figure>
<h4 id="touch-test-proto-file-like"><a href="#touch-test-proto-file-like" class="headerlink" title="touch test.proto file like"></a>touch test.proto file like</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package example;</span><br><span class="line">	</span><br><span class="line">enum FOO &#123; X = 17; &#125;;</span><br><span class="line">	</span><br><span class="line">message Test &#123;</span><br><span class="line">    required string label = 1;</span><br><span class="line">    optional int32 type = 2 [default=77];</span><br><span class="line">    repeated int64 reps = 3;</span><br><span class="line">    optional group OptionalGroup = 4 &#123;</span><br><span class="line">        required string RequiredField = 5;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="compile-the-proto"><a href="#compile-the-proto" class="headerlink" title="compile the proto"></a>compile the proto</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc --go_out=. *.proto</span><br></pre></td></tr></table></figure>
<p>此处可以指定目录，like</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc --go_out=../pb-go *.proto</span><br></pre></td></tr></table></figure>
<h4 id="use-go"><a href="#use-go" class="headerlink" title="use go"></a>use go</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">// import packages</span><br><span class="line">import (</span><br><span class="line">	&quot;fmt&quot;</span><br><span class="line">	&quot;go-protobuf-demo/pb-go&quot;</span><br><span class="line">	&quot;log&quot;</span><br><span class="line"></span><br><span class="line">	&quot;github.com/golang/protobuf/proto&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// main function</span><br><span class="line">func main() &#123;</span><br><span class="line"></span><br><span class="line">	// define and init</span><br><span class="line">	test := &amp;example.Test&#123;</span><br><span class="line">		Label: proto.String(&quot;hello&quot;),</span><br><span class="line">		Type:  proto.Int32(111),</span><br><span class="line">		Optionalgroup: &amp;example.Test_OptionalGroup&#123;</span><br><span class="line">			RequiredField: proto.String(&quot;goog bye&quot;),</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// Marsha1 to proto</span><br><span class="line">	data, err := proto.Marshal(test)</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		log.Fatal(&quot;marsha1ing error:&quot;, err)</span><br><span class="line">		fmt.Println(&quot;marsha1ing error:&quot;, err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	newTest := &amp;example.Test&#123;&#125;</span><br><span class="line">	err = proto.Unmarshal(data, newTest)</span><br><span class="line"></span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		log.Fatal(&quot;unmarsha1 error:&quot;, err)</span><br><span class="line">		fmt.Println(&quot;unmarsha1 error: &quot;, err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(newTest.GetType())</span><br><span class="line">	fmt.Println(newTest.GetReps())</span><br><span class="line"></span><br><span class="line">	if test.GetLabel() == newTest.GetLabel() &#123;</span><br><span class="line">		fmt.Println(&quot;data mismatch %q != %q&quot;, test.GetLabel(), newTest.GetLabel())</span><br><span class="line">	&#125;</span><br><span class="line">	//fmt.Println(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Golang初步了解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Golang初步了解/" class="post-title-link" itemprop="url">Golang初步了解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 09:56:56" itemprop="dateModified" datetime="2018-09-03T09:56:56+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Golang基本认识"><a href="#Golang基本认识" class="headerlink" title="Golang基本认识"></a>Golang基本认识</h2><h3 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h3><ol>
<li><p>语法严谨，简洁 <a href="https://github.com/liujb/pitaya/blob/master/golang-basic-program.md" target="_blank" rel="noopener">basic-program</a></p>
<ul>
<li>自带fmt，代码须经过格式化才能被编译通过。</li>
<li>public，private靠大小写来约定。</li>
<li>静态语言动态化 <code>age := 26</code></li>
<li>range特性 </li>
</ul>
</li>
<li><p>部署方便</p>
<ul>
<li>部署时候只需要提供一个可执行文件加配置即可。</li>
</ul>
</li>
</ol>
<h3 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a>Internet</h3><ol start="3">
<li>性能好，但是不如C，C++，JAVA。</li>
<li>语言层面支持并发，Channel。</li>
<li>廉价的goroutine可以让我们欢快的处理异步任务，channel可以用来交换数据。借助goroutine，可以很容易的实现高性能的服务端。</li>
</ol>
<p><a href="http://www.zhihu.com/question/21409296" target="_blank" rel="noopener">Golang的优势</a><br><a href="http://tnt.wicast.tk/2015/05/04/golang-is-my-choice/" target="_blank" rel="noopener">初入坑golang，感觉良好</a></p>
<h3 id="Golang适合做什么"><a href="#Golang适合做什么" class="headerlink" title="Golang适合做什么"></a>Golang适合做什么</h3><ul>
<li>服务器编程，以前你如果使用C或者C++做的那些事情，用Go来做很合适，例如处理日志、数据打包、虚拟机处理、文件系统等。</li>
<li>分布式系统，数据库代理器等</li>
<li>网络编程，这一块目前应用最广，包括Web应用、API应用、下载应用、</li>
<li>内存数据库，前一段时间google开发的groupcache，couchbase的部分组建</li>
<li>云平台，目前国外很多云平台在采用Go开发，CloudFoundy的部分组建，前VMare的技术总监自己出来搞的apcera云平台。</li>
</ul>
<h2 id="开发环境的搭建"><a href="#开发环境的搭建" class="headerlink" title="开发环境的搭建"></a>开发环境的搭建</h2><ol>
<li><a href="https://github.com/liujb/pitaya/blob/master/golang-mac-env-and-path.md" target="_blank" rel="noopener">Golang-env-and-path</a>    </li>
<li><a href="https://github.com/liujb/pitaya/blob/master/golang-dev-on-mac.md" target="_blank" rel="noopener">Golang-dev-env-on-mac</a>    </li>
<li><a href="http://golang.org/doc/install" target="_blank" rel="noopener">Golang-install</a>    </li>
<li><a href="http://sunbofu.blog.51cto.com/6431507/1546005" target="_blank" rel="noopener">Sublime环境</a>    </li>
<li><a href="http://www.infoq.com/cn/articles/use-liteIDE-develop-go" target="_blank" rel="noopener">LiteIDE</a></li>
</ol>
<h2 id="Demos"><a href="#Demos" class="headerlink" title="Demos"></a>Demos</h2><ol>
<li><a href="https://github.com/liujb/pitaya/blob/master/golang-protobuf-quick-start.md" target="_blank" rel="noopener">Golang-use-protobuf</a>    </li>
<li><a href="https://github.com/liujb/go-redis-demo" target="_blank" rel="noopener">Golang-use-redis</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="liujiangbei"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">liujiangbei</p>
  <div class="site-description" itemprop="description">This is description</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">186</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/liujb" title="GitHub → https://github.com/liujb" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liujiangbei88@gmail.com" title="Mail → mailto:liujiangbei88@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/PrivateGuess" title="Twitter → https://twitter.com/PrivateGuess" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liujiangbei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.7.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
