<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This is description">
<meta property="og:type" content="website">
<meta property="og:title" content="liujb&#39;s blog">
<meta property="og:url" content="http://yoursite.com/page/14/index.html">
<meta property="og:site_name" content="liujb&#39;s blog">
<meta property="og:description" content="This is description">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="liujb&#39;s blog">
<meta name="twitter:description" content="This is description">

<link rel="canonical" href="http://yoursite.com/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>liujb's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liujb's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">About tech</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives<span class="badge">186</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/liujb" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript扩展基础类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript扩展基础类型/" class="post-title-link" itemprop="url">Javascript扩展基础类型</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 22:19:39" itemprop="dateModified" datetime="2018-08-30T22:19:39+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="给Function的prototype添加扩展方法"><a href="#给Function的prototype添加扩展方法" class="headerlink" title="给Function的prototype添加扩展方法"></a>给Function的prototype添加扩展方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">Function.prototype添加method方法，并返回this对象</span><br><span class="line">PS：这是function四种模式中的方法调用模式，因为function被保存为一个对象的属性</span><br><span class="line">如果method被一个对象调用，那么传入到method的方法内的this就是那个对象</span><br><span class="line">Function也是所有对象的基类？？</span><br><span class="line">*/</span><br><span class="line">Function.prototype.method = function(funcName, func) &#123;</span><br><span class="line">   if (!this.prototype[funcName]) &#123;</span><br><span class="line">       this.prototype[funcName] = func;</span><br><span class="line">   &#125; else &#123;&#125;</span><br><span class="line">   return this;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="给Function添加getName方法"><a href="#给Function添加getName方法" class="headerlink" title="给Function添加getName方法"></a>给Function添加getName方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//给所有的Function对象添加了一个getName方法</span><br><span class="line">Function.method(&apos;getName&apos;, function(name) &#123;</span><br><span class="line">   console.log(&apos;name: &apos; + name);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="给Number类型添加int方法"><a href="#给Number类型添加int方法" class="headerlink" title="给Number类型添加int方法"></a>给Number类型添加int方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//给Number类型添加一个int方法</span><br><span class="line">//有疑问，此处调用Number.method(...)为何会调用Function.prototype.method从而给Number的prototype也添加了一个&quot;int&quot;方法</span><br><span class="line">//难道是因为Number.prototype继承与Function.prototpye，而Function.prototype继承与Object.prototype?</span><br><span class="line">//否则Number.method(...)怎么就会调用到Function.protoype.method(...)上去了！</span><br><span class="line">Number.method(&apos;int&apos;, function() &#123;</span><br><span class="line">return Math[this &lt; 0 ? &apos;ceil&apos; : &apos;floor&apos;](this);</span><br><span class="line">//此处this指的是什么？此处this是传入的对象</span><br><span class="line">//比如 var f = 10.22;f.int();this===f</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="给String添加trim方法"><a href="#给String添加trim方法" class="headerlink" title="给String添加trim方法"></a>给String添加trim方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//一样的疑问，String.method怎么就给String.prototype添加上了trim方法</span><br><span class="line">String.method(&apos;trim&apos;, function() &#123;</span><br><span class="line">   return this.replace(/^\s+|\s$/g, &apos;&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="给Array添加sum方法"><a href="#给Array添加sum方法" class="headerlink" title="给Array添加sum方法"></a>给Array添加sum方法</h4><pre><code>//sum
Array.method(&apos;sum&apos;, function() {
   console.log(&apos;数组求和方法&apos;);
});
console.log([].sum());
console.log(&apos; s  &apos;.trim().length);
</code></pre><blockquote>
<p>Note By Liujb<br>引用著名出处</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript控制input事件连续发送/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript控制input事件连续发送/" class="post-title-link" itemprop="url">Javascript控制input事件连续发送</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:12:36" itemprop="dateModified" datetime="2018-09-03T10:12:36+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="input事件不连续执行某操作"><a href="#input事件不连续执行某操作" class="headerlink" title="input事件不连续执行某操作"></a>input事件不连续执行某操作</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>输入联想的时候每次输入都会发送ajax请求，这个地方主要是控制请求的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;持续发送Ajax请求怎么节约请求&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;txt_test&quot;&gt;&lt;/input&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">window.addEventListener(&quot;DOMContentLoaded&quot;,function(ev)&#123;</span><br><span class="line">	var txt = document.getElementById(&quot;txt_test&quot;);</span><br><span class="line">	var count = 0, stack = [], timeout = 0;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * [description]</span><br><span class="line">	 * @param  &#123;[type]&#125; ev [description]</span><br><span class="line">	 * @return &#123;[type]&#125;    [description]</span><br><span class="line">	 */</span><br><span class="line">	txt_test.addEventListener(&quot;input&quot;,function(ev)&#123;</span><br><span class="line">		count++;</span><br><span class="line">		stack.push(ev.target.value);</span><br><span class="line">		console.log(&quot;数组为：&quot;+stack.join(&quot;,&quot;) +&quot; count: &quot;+ count+ &quot; length: &quot;+ stack.length);</span><br><span class="line">		if(count === stack.length)&#123;</span><br><span class="line">			timeout = setTimeout(function()&#123;</span><br><span class="line">				if(stack[stack.length-1])&#123;</span><br><span class="line">					console.log(&quot;ajax request: &quot;+stack[stack.length-1]);</span><br><span class="line">				&#125;</span><br><span class="line">				count = 0;</span><br><span class="line">				stack = [];</span><br><span class="line">			&#125;,600);</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			clearTimeout(timeout);</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	&#125;,false);</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	* 不能监听到组合键、clipData发生的改变</span><br><span class="line">	* @param  &#123;[type]&#125; ev [description]</span><br><span class="line">	* @return &#123;[type]&#125;    [description]</span><br><span class="line">	*/</span><br><span class="line">	// txt_test.addEventListener(&quot;keyup&quot;,function(ev)&#123;</span><br><span class="line">		// 	console.log(&quot;sdsd&quot;);</span><br><span class="line">	// &#125;,false);</span><br><span class="line">	</span><br><span class="line">&#125;,false);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript搜索框/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript搜索框/" class="post-title-link" itemprop="url">Javascript搜索框</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:08:54" itemprop="dateModified" datetime="2018-09-03T10:08:54+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>根据用户的输入，联想出地址列表，涉及到连续发送请求，浪费资源，且网络状态不好时，异步请求延迟导致sug跳动影响体验</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ol>
<li>控制请求数。</li>
<li>控制请求返回。</li>
</ol>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><ol>
<li>使用队列方式控制请求。</li>
<li>对XMLHttpRequest采取单例模式，每次发送新的请求时候都检测readystatus，如果不等于0，则先abort请求，再发送请求，这样永远就只有一个请求返回，可以解决sug跳动的问题。</li>
</ol>
<h4 id="控制队列代码"><a href="#控制队列代码" class="headerlink" title="控制队列代码"></a>控制队列代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&quot;DOMContentLoaded&quot;,function(ev)&#123;</span><br><span class="line">	var txt = document.getElementById(&quot;txt_test&quot;);</span><br><span class="line">	var count = 0, stack = [], timeout = 0;</span><br><span class="line">	txt_test.addEventListener(&quot;input&quot;,function(ev)&#123;</span><br><span class="line">		count++;</span><br><span class="line">		stack.push(ev.target.value);</span><br><span class="line">		console.log(&quot;数组为：&quot;+stack.join(&quot;,&quot;) +&quot; count: &quot;+ count+ &quot; length: &quot;+stack.length);</span><br><span class="line">		if(count === stack.length)&#123;</span><br><span class="line">			timeout = setTimeout(function()&#123;</span><br><span class="line">				if(stack[stack.length-1])&#123;</span><br><span class="line">					console.log(&quot;ajax request: &quot;+stack[stack.length-1]);</span><br><span class="line">				&#125;</span><br><span class="line">				count = 0;</span><br><span class="line">				stack = [];</span><br><span class="line">			&#125;,600);</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			clearTimeout(timeout);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,false);</span><br><span class="line">&#125;,false);</span><br><span class="line"></span><br><span class="line">//不断的输入，控制了请求数</span><br></pre></td></tr></table></figure>
<h4 id="单例模式代码"><a href="#单例模式代码" class="headerlink" title="单例模式代码"></a>单例模式代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 单例模式－－包装盒</span><br><span class="line"> * @param  &#123;Function&#125; fn [description]</span><br><span class="line"> * @return &#123;[type]&#125;      [description]</span><br><span class="line"> */</span><br><span class="line">var singleton = function(fn) &#123;</span><br><span class="line">    var _instance = null;</span><br><span class="line">    return function() &#123;</span><br><span class="line">        return _instance || (_instance = fn.apply(this, arguments));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">	</span><br><span class="line">var XHR = singleton(function() &#123;</span><br><span class="line">    // console.log(&quot;create&quot;);</span><br><span class="line">    if(window.XMLHttpRequest)&#123;</span><br><span class="line">        return new XMLHttpRequest();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</span><br><span class="line">        &#125;catch(e)&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">//单例模式注意变量的作用域，防止单例不单！</span><br></pre></td></tr></table></figure>
<h4 id="最终完整代码"><a href="#最终完整代码" class="headerlink" title="最终完整代码"></a>最终完整代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">//管道控制请求数量</span><br><span class="line">/**</span><br><span class="line"> * 为input type=text注册input事件，管道控制不连续发送ajax请求</span><br><span class="line"> * @param  &#123;[type]&#125; opts [description]</span><br><span class="line"> * @return &#123;[type]&#125;      [description]</span><br><span class="line"> */</span><br><span class="line">var registerInputEvent = function(opts)&#123;</span><br><span class="line">    var count = 0, stack = [], timeout = 0;</span><br><span class="line">    if(opts.txtEle &amp;&amp; txtEle.nodeType === 1)&#123;</span><br><span class="line">        opts.txtEle.addEventListener(&quot;input&quot;,function(ev)&#123;</span><br><span class="line">            opts.immediateAction &amp;&amp; opts.immediateAction(ev.target);</span><br><span class="line">            count++;</span><br><span class="line">            stack.push(ev.target.value);</span><br><span class="line">            if(count === stack.length)&#123;</span><br><span class="line">                timeout = setTimeout(function()&#123;</span><br><span class="line">                    if(stack[stack.length-1])&#123;</span><br><span class="line">                        opts.deplayAction &amp;&amp; opts.deplayAction(ev.target);</span><br><span class="line">                    &#125;</span><br><span class="line">                    count = 0;</span><br><span class="line">                    stack = [];</span><br><span class="line">                &#125;,opts.interval);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                clearTimeout(timeout);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,false);</span><br><span class="line">    &#125;else&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//单例模式控制异步返回</span><br><span class="line">/**</span><br><span class="line"> * 单例模式－－包装盒</span><br><span class="line"> * @param  &#123;Function&#125; fn [description]</span><br><span class="line"> * @return &#123;[type]&#125;      [description]</span><br><span class="line"> */</span><br><span class="line">var singleton = function(fn) &#123;</span><br><span class="line">    var _instance = null;</span><br><span class="line">    return function() &#123;</span><br><span class="line">        return _instance || (_instance = fn.apply(this, arguments));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">	</span><br><span class="line">var XHR = singleton(function() &#123;</span><br><span class="line">    // console.log(&quot;create&quot;);</span><br><span class="line">    if(window.XMLHttpRequest)&#123;</span><br><span class="line">        return new XMLHttpRequest();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        try&#123;</span><br><span class="line">            return new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</span><br><span class="line">        &#125;catch(e)&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">	</span><br><span class="line">/**</span><br><span class="line"> * 持续发请求的ajax方法</span><br><span class="line"> * @param  &#123;[type]&#125; opts [description]</span><br><span class="line"> * @return &#123;[type]&#125;      [description]</span><br><span class="line"> */</span><br><span class="line">var sequenceAjax = function(opts) &#123;</span><br><span class="line">    var res = &apos;&apos;, _timeout = 0, xhr = new XHR();</span><br><span class="line">    var obj2Body = function(obj) &#123;</span><br><span class="line">        if (obj) &#123;</span><br><span class="line">            for (var p in obj) &#123;</span><br><span class="line">                if (obj.hasOwnProperty(p)) &#123;</span><br><span class="line">                    res += &apos;&amp;&apos; + p + &apos;=&apos; + obj[p] + &apos;&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res.replace(/^\&amp;/, &quot;&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    if(xhr)&#123;</span><br><span class="line">        if(xhr.readyState !== 0)&#123;</span><br><span class="line">            xhr.abort();</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.open(opts.method, opts.url, true); //true表示异步</span><br><span class="line">        xhr.onreadystatechange = function()&#123;</span><br><span class="line">            if (xhr.readyState === 4) &#123;</span><br><span class="line">                xhr.status === 200 ? opts.succFunc(xhr.responseText) : opts.failFunc(xhr.responseText);</span><br><span class="line">                _timeout &amp;&amp; clearTimeout(_timeout);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        var body = null;</span><br><span class="line">        if (opts.method.toUpperCase() === &apos;POST&apos;) &#123;</span><br><span class="line">            body = opts.data ? helper.obj2Body(opts.data) : &quot;&quot;;</span><br><span class="line">            xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send(body);</span><br><span class="line">        if(opts.timeout)&#123;</span><br><span class="line">            var _millisecond = opts.timeout.millisecond || 30000,</span><br><span class="line">                _callback =  opts.timeout.callback || function()&#123;&#125;;</span><br><span class="line">            _timeout = setTimeout(function()&#123; helper.了endReq(xhr); _callback(); &#125;, _millisecond);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registerInputEvent(&#123;txtEle: txt_start, interval: 600, immediateAction: immediateAction, deplayAction: deplayAction &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="PS：解释"><a href="#PS：解释" class="headerlink" title="PS：解释"></a>PS：解释</h4><ol>
<li>immediateAction表示input事件中需要立刻响应的动作</li>
<li>deplayAction表示input事件中需要控制的响应动作，如ajax根据用户请求去联想。</li>
</ol>
<blockquote>
<p>liujb原创，引用请注明出处</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript数字相关方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript数字相关方法/" class="post-title-link" itemprop="url">Javascript数字相关方法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 10:08:46" itemprop="dateModified" datetime="2018-09-03T10:08:46+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>预先定义两个变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var x = 30, y = 45;</span><br></pre></td></tr></table></figure>
<h4 id="全局对象中跟数字有关的方法"><a href="#全局对象中跟数字有关的方法" class="headerlink" title="全局对象中跟数字有关的方法"></a>全局对象中跟数字有关的方法</h4><ol>
<li>isNaN() //检查某个值是否是数字。</li>
<li>Number() //把对象的值转换为数字。</li>
<li>parseFloat() //解析一个字符串并返回一个浮点数。 </li>
<li>parseInt() //解析一个字符串并返回一个整数。</li>
</ol>
<h4 id="Number对象的方法"><a href="#Number对象的方法" class="headerlink" title="Number对象的方法"></a>Number对象的方法</h4><ol>
<li>console.log(11.24567.toString(8)); //把数字转换为字符串，使用指定的基数如8进制，16进制。</li>
<li>console.log(11.24567.toFixed(2)); // 把数字转换为字符串，保留指定小数位.</li>
<li>console.log(111111.24567.toExponential()); //把对象的值转换为指数计数法.</li>
<li>console.log(11.25567.toPrecision(3)); //把数字格式化为指定的长度。</li>
</ol>
<h4 id="返回随机数"><a href="#返回随机数" class="headerlink" title="返回随机数"></a>返回随机数</h4><ol>
<li>console.log(Math.random()) //返回 0 ~ 1 之间的随机数</li>
</ol>
<h4 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h4><ol>
<li>console.log(Math.floor(x)) //对数进行下舍入</li>
<li>console.log(Math.ceil(x)) //对数进行上舍入</li>
<li>console.log(Math.round(x)) //把数四舍五入为最接近的整数</li>
</ol>
<h4 id="绝对值平局数"><a href="#绝对值平局数" class="headerlink" title="绝对值平局数"></a>绝对值平局数</h4><ol>
<li>console.log(Math.abs(x)) //返回数的绝对值</li>
<li>console.log(Math.sqrt(x)) //返回数的平方根</li>
</ol>
<h4 id="最大值最小值"><a href="#最大值最小值" class="headerlink" title="最大值最小值"></a>最大值最小值</h4><ol>
<li>console.log(Math.max(x, y)) //返回 x 和 y 中的最高值</li>
<li>console.log(Math.min(x, y)) //返回 x 和 y 中的最低值</li>
</ol>
<h4 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h4><ol>
<li>console.log(Math.sin(x)) //返回数的正弦</li>
<li>console.log(Math.cos(x)) //返回数的余弦</li>
<li>console.log(Math.tan(x)) //返回角的正切</li>
<li>console.log(Math.atan2(y, x)) //返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）</li>
<li>console.log(Math.acos(x)) //返回数的反余弦值</li>
<li>console.log(Math.asin(x)) //返回数的反正弦值</li>
<li>console.log(Math.atan(x)) //以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值</li>
</ol>
<h4 id="指数和幂"><a href="#指数和幂" class="headerlink" title="指数和幂"></a>指数和幂</h4><ol>
<li>console.log(Math.exp(x)) //返回 e 的指数</li>
<li>console.log(Math.log(x)) //返回数的自然对数（底为e）</li>
<li>console.log(Math.pow(x, y)) //返回 x 的 y 次幂</li>
</ol>
<h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><ol>
<li>console.log(Math.toSource()) //返回该对象的源代码</li>
<li>console.log(Math.valueOf()) //返回 Math 对象的原始值</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript数据类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript数据类型/" class="post-title-link" itemprop="url">Javascript-data-type</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 22:18:00" itemprop="dateModified" datetime="2018-08-30T22:18:00+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Javascript-data-type"><a href="#Javascript-data-type" class="headerlink" title="Javascript-data-type"></a>Javascript-data-type</h1><p>Javascript中基础类型主要有</p>
<ul>
<li>string</li>
<li>number</li>
<li>bool</li>
<li>array</li>
<li>object</li>
<li>function</li>
</ul>
<p>其中<code>typeof</code>返回5种类型的字符串</p>
<ul>
<li>string</li>
<li>number</li>
<li>boolean</li>
<li>function</li>
<li>object</li>
</ul>
<p>其中对数组做<code>typeof</code>操作会返回<code>object</code>，所以数组的检测需要额外注意。</p>
<blockquote>
<p> <code>var arr = []; console.log(arr instanceof Array)</code>在<code>node</code>环境或者同一<code>global</code>环境下会返回<code>true</code>，但是在跨iframe的情况下是为<code>false</code>，因为在浏览器不同<code>iframe</code>环境下<code>window.Array</code>是不同的。</p>
</blockquote>
<h4 id="检测一个对象是否为特定的类型"><a href="#检测一个对象是否为特定的类型" class="headerlink" title="检测一个对象是否为特定的类型"></a>检测一个对象是否为特定的类型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 检测一个对象是否为特定的类型</span><br><span class="line"> * 接收两个参数</span><br><span class="line"> * 第一个参数为对象</span><br><span class="line"> * 第二个参数为特定的类型比如&apos;Number&apos;</span><br><span class="line"> * @return bool</span><br><span class="line"> */</span><br><span class="line">var check = function() &#123;</span><br><span class="line">   if (arguments.length === 2) &#123;</span><br><span class="line">       return Object.prototype.toString.call(arguments[0]) === &apos;[object &apos; + arguments[1] + &apos;]&apos;;</span><br><span class="line">   &#125; else &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为数字"><a href="#检测对象是否为数字" class="headerlink" title="检测对象是否为数字"></a>检测对象是否为数字</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isNum = function(val) &#123;</span><br><span class="line">   return check(val, &apos;Number&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为字符串"><a href="#检测对象是否为字符串" class="headerlink" title="检测对象是否为字符串"></a>检测对象是否为字符串</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isString = function(str) &#123;</span><br><span class="line">   return check(str, &apos;String&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为布尔值"><a href="#检测对象是否为布尔值" class="headerlink" title="检测对象是否为布尔值"></a>检测对象是否为布尔值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isBoolean = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Boolean&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为Null"><a href="#检测对象是否为Null" class="headerlink" title="检测对象是否为Null"></a>检测对象是否为Null</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isNull = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Null&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为Undefined"><a href="#检测对象是否为Undefined" class="headerlink" title="检测对象是否为Undefined"></a>检测对象是否为Undefined</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isUndefined = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Undefined&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为数组"><a href="#检测对象是否为数组" class="headerlink" title="检测对象是否为数组"></a>检测对象是否为数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isArray = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Array&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为Object"><a href="#检测对象是否为Object" class="headerlink" title="检测对象是否为Object"></a>检测对象是否为Object</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isObj = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Object&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为函数"><a href="#检测对象是否为函数" class="headerlink" title="检测对象是否为函数"></a>检测对象是否为函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isFunc = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Function&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为日期"><a href="#检测对象是否为日期" class="headerlink" title="检测对象是否为日期"></a>检测对象是否为日期</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isDate = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;Date&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="检测对象是否为正则表达式"><a href="#检测对象是否为正则表达式" class="headerlink" title="检测对象是否为正则表达式"></a>检测对象是否为正则表达式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var isReg = function(obj) &#123;</span><br><span class="line">   return check(obj, &apos;RegExp&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript检测数组类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript检测数组类型/" class="post-title-link" itemprop="url">Javascript检测数组类型</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 22:15:40" itemprop="dateModified" datetime="2018-08-30T22:15:40+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var array = [];</span><br><span class="line">var obj = &#123;&#125;;</span><br><span class="line">alert(typeof array); //object</span><br><span class="line">alert(typeof obj); //object</span><br><span class="line">alert(array instanceof Object); //true</span><br><span class="line">alert(array instanceof Array); //true</span><br><span class="line">alert(obj instanceof Object); //true</span><br><span class="line">alert(obj instanceof Array); //false</span><br><span class="line">alert(array.constructor === Object); //false</span><br><span class="line">alert(array.constructor === Array); //true</span><br><span class="line">alert(obj.constructor === Object); //true</span><br><span class="line">alert(obj.constructor === Array); //false</span><br></pre></td></tr></table></figure>
<h5 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function is_Array(obj) &#123;</span><br><span class="line">   var ret = false;</span><br><span class="line">   if (typeof obj === &apos;object&apos;) &#123;</span><br><span class="line">       if ((obj instanceof Array) &amp;&amp; (obj.constructor === Array)) &#123;</span><br><span class="line">           ret = true;</span><br><span class="line">       &#125; else &#123;&#125;</span><br><span class="line">   &#125; else &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ECMAScript5提供了一个新方法isArray()</span><br><span class="line">function is_Array(obj) &#123;</span><br><span class="line">   var ret = false;</span><br><span class="line">   if (typeof Array.isArray) &#123;</span><br><span class="line">       ret = Array.isArray(obj);</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">       ret = Object.prototype.toString.call(obj) === &quot;[object Array]&quot;;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="方法三："><a href="#方法三：" class="headerlink" title="方法三："></a>方法三：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//根据数组的特性可以比较快捷简便的知道该对象是否为数组</span><br><span class="line">function is_Array(obj)&#123;</span><br><span class="line">   if(obj.push)&#123;</span><br><span class="line">       //只有数组有push方法</span><br><span class="line">       return true;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">       return false;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在浏览器上如果有iframe的话使用<code>instanceof</code>就会有问题</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript真假比对CASE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript真假比对CASE/" class="post-title-link" itemprop="url">Javascript真假比对CASE</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-03 09:59:39" itemprop="dateModified" datetime="2018-09-03T09:59:39+08:00">2018-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if ([] == ![]) &#123;</span><br><span class="line">   console.log(&apos;A&apos;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">   console.log(&apos;B&apos;);</span><br><span class="line">&#125; //提问：以上到底是输出 A 还是 B 呢？</span><br><span class="line">``` </span><br><span class="line">注意：</span><br></pre></td></tr></table></figure>
<p>console.log([] == false); //true????真的很奇怪，[]是一个数组。<br>console.log([] == true); //false<br>if ([]) {<br>   alert(‘true’) //弹出true<br>}<br>console.log(![]); //false<br>console.log( !! []); //true<br><code>`</code></p>
<p><strong>也就是说：在做==时，js的执行到底做了什么？</strong></p>
<blockquote>
<p> 解答：终于尼玛找到答案了<br><code>[]==![]</code>相当于<code>[]==false</code>(没有异议了吧因为![]就是false)<br><code>[]==false</code>又是怎么转化的呢，对于Object类型先转化成基础类型Number，为0<br><code>0==false</code>又将false转化为Number也是为0<br>所以两者相等。</p>
</blockquote>
<p><strong>附上比较规则，ECMA这帮人写的算法过程比较啰嗦！一句话来概括就是</strong></p>
<ul>
<li>对于基本类型Boolean，Number，String，三者之间做比较时，总是向 Number进行类型转换，然后再比较；</li>
<li>如果有Object，那么将Object转化成这三种基本类型（PS：到底转换成哪一种呢？我猜测会转化成Number），再进行基本类型比较；</li>
<li>对于null和undefined，只有 x，y分别是它们时才相同，其他都为false。</li>
</ul>
<p>对于类型相同那么==操作符就会直接比较值，不会再进行转换了！</p>
<p>得出结论，在JS中尽量少和使用同等运算符<code>===</code>和<code>!==</code>避免使用<code>==</code>和<code>!=</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript移除数组重复项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript移除数组重复项/" class="post-title-link" itemprop="url">Javascript移除数组重复项</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 22:24:11" itemprop="dateModified" datetime="2018-08-30T22:24:11+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="去除数组中重复项"><a href="#去除数组中重复项" class="headerlink" title="去除数组中重复项"></a>去除数组中重复项</h4><pre><code>var arr = [1, 1, 2, 3, 33, 4, 4, 5];
</code></pre><h4 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h4><pre><code>var func1 = function(arr) {
    for (var i = 0, len = arr.length; i &lt; len; i++) {
        for (var j = i + 1; j &lt; len; j++) {
            if (arr[i] === arr[j]) {
                arr.splice(j, 1); //删除j位置的元素并返回删除后的数组
                break;
            } else {}
        }
    }
};
</code></pre><h4 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h4><pre><code>var func2 = function(arr) {
    var newArr = [];
    for (var i = 0, len = arr.length; i &lt; len; i++) {
        for (var j = i + 1; j &lt; len; j++) {
            if (arr[i] === arr[j]) {
                j = false;
                break; //发现元素相同则跳出循环
            } else {}
        }
        if (j) {
            newArr.push(arr[i]);
        } else {}
    }
    return newArr;
};
</code></pre><h4 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h4><pre><code>function func3(ar) {
    var m, n = [],
        o = {};
    for (var i = 0;
        (m = ar[i]) !== undefined; i++)

        if (!o[m]) {
            n.push(m);
            o[m] = true;
        }
    return n.sort(function(a, b) {
        return a - b；
    });
}
arr = func2(arr);
console.log(arr.toString());
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript第一堂课/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript第一堂课/" class="post-title-link" itemprop="url">Javascript第一堂课</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-09-01 22:54:30" itemprop="dateModified" datetime="2018-09-01T22:54:30+08:00">2018-09-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h4><p>javascript主要分为三个部分：</p>
<ul>
<li>javascript核心（ECMAScript）</li>
<li>DOM文档对象模型</li>
<li>BOM浏览器对象模型</li>
</ul>
<p>ECMAScript与web浏览器没有任何依赖，这门语言并不包含输入输出，ECMAScript-262定义的只是语言基础。web浏览器只是ECMAScript实现可能的宿主环境之一</p>
<p>宿主环境提供基本的ECMAScript实现，同时也会提供该语言的扩展，这些扩展如DOM利用ECMAScript的核心类型和语法提供更多的功能。</p>
<p>ECMAScript-262标准没有参照Web浏览器，它规定了这门语言的语法、类型、语句、关键字、保留字、操作符、对象。</p>
<p>Javascript实现了ECMAScript，同样ActionScript、OpenView ScriptEase也实现了ECMAScript。</p>
<h4 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h4><ol>
<li>DOM是针对XML但经过扩展用于HTML的应用程序编程接口（API Application Program Interface）。</li>
<li><p>DOM1级（1998年10月）正式成为W3C的推荐标准，DOM1级有两个模块：</p>
<blockquote>
<p>①DOM核心（DOM Core）<br>②DOM HTML。</p>
</blockquote>
</li>
<li><p>DOM Core规定的是如何映射基于XML的文档结构，以便简化对文档中任一部分的访问和操作。</p>
</li>
<li>DOM HTML是在DOM Core的基础上加以扩展，添加了针对HTML的对象和方法。</li>
<li>DOM2级在原来DOM的基础上又扩充了（DHTML一直都支持的）鼠标和用户界面事件、范围、便利（迭代DOM文档的方法）等模块。，而且还通过对象接口增加了对CSS的支持。</li>
<li>DOM2级同时也对DOM1级的核心进行扩展并开始支持XML命名空间。</li>
<li><p>DOM2级别增加的新类型和新接口的定义：</p>
<blockquote>
<p>①DOM视图（跟踪不同文档视图的接口）<br>②DOM事件（事件和事件处理接口）<br>③DOM样式（基于Css为元素应用样式的接口）<br>④DOM遍历和范围（遍历和操作文档树的接口）</p>
</blockquote>
</li>
<li><p>DOM3级进一步扩展DOM。引入了：</p>
<blockquote>
<p>①以统一方式加载和保存文档的方法（在DOM加载和保存模块中定义）<br>②新增验证文档的方法（在DOM验证模块中定义）</p>
</blockquote>
</li>
<li><p>DOM3级也对DOM核心进行了扩展，开始支持XML1.0规范，涉及XML Infoset，XPath，XML Base。</p>
</li>
<li>DOM0（其实不存在）指的是IE4.0，Netscape Navigator4.0最初支持的DHTML而已。</li>
<li>Web浏览器对DOM的支持：IE在IE的时候才完全实现DOM1，而FF，Chrome，Safari，Opera已经远超IE了！</li>
</ol>
<h4 id="BOM："><a href="#BOM：" class="headerlink" title="BOM："></a>BOM：</h4><ol>
<li>根本上来讲BOM只处理浏览器窗口和框架，但是人们习惯把针对浏览器的js扩展算作BOM的一部分。</li>
<li><p>BOM主要包括以下内容：</p>
<blockquote>
<p>①弹出新浏览器窗口的功能<br>②移动、缩放管理浏览器窗口的功能<br>③提供浏览器对象信息的navigator对象<br>④提供浏览器所加载页面的详细信息的location对象<br>⑤提供用户显示器分辨率的screen对象<br>⑥对cookies的支持<br>⑦像XMLHttpRequest和IE的ActiveXObject对象。</p>
</blockquote>
</li>
</ol>
<h4 id="Script元素"><a href="#Script元素" class="headerlink" title="Script元素"></a>Script元素</h4><ol>
<li>在HTML页面中插入Javascript的主要方法，就是使用<code>&lt;script&gt;</code>元素，这个元素被加入到正式的HTML规范中。</li>
<li><p><code>&lt;script&gt;</code>元素定义了5个属性：</p>
<blockquote>
<p>①charset（指定代码的字符集，大部分浏览器会忽略此属性，不常用）<br>②defer（表示脚本可以延迟到文档完全被解析和现实之后在加载）<br>③language（已被废弃）<br>④src（可选，表示外部文件，也可来源于外部域）<br>⑤type（必选，可以看成是language的替代属性，虽然<code>text/javascript</code>和<code>text/ecmascript</code>已经不被推荐，但是一直以来还是使用<code>text/javascript</code>，实际上服务器在传送javascript文件时使用的MIME类型为<code>application/x-javascript</code>,另外非IE浏览器中可以使用<code>application/javascript</code>或者<code>application/ecmascript</code>，考虑到最大限度的浏览器兼容性还是建议使用<code>text/javascript</code>）</p>
</blockquote>
</li>
<li><p>在使用<code>&lt;script&gt;</code>嵌入到代码中时，记住不要在代码中任何地方出现<code>&lt;/script&gt;</code>，注意分割！</p>
</li>
<li>外部js，只需要包好<code>&lt;script&gt;&lt;/script&gt;</code>之间的代码，也就是说外部js不需要再包含<code>&lt;script&gt;&lt;/script&gt;</code>。</li>
<li>如果在XHTML中<code>&lt;script&gt;</code>元素也可以写成<code>&lt;script type=&#39;text/javscript&#39; src=&#39;example.js&#39; /&gt;</code>注意此处没有<code>&lt;/script&gt;</code>，而在HTML中则不行，特别是IE会报错。</li>
<li>外部js文件的扩展名.js不是必须的，浏览器不会检测其扩展名，这样就使得服务器返回动态生成js文件成为可能。</li>
<li>带有src属性的<code>&lt;script&gt;</code>元素不应该在其<code>&lt;script&gt;&lt;/script&gt;</code>中再出现代码。</li>
<li>建议把<code>&lt;script&gt;</code>元素放在body元素的后面。防止出现由于加载js文件文档出现空白。</li>
<li><p>在XHTML中使用<code>&lt;script&gt;</code>需要利用CData片段</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt; </span><br><span class="line">&lt;![CData[ </span><br><span class="line">    //这个区域内写js代码</span><br><span class="line">//]]&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p> 当有浏览器不兼容XHTML时，因而不支持XHTML，再使用//注释掉CData即可。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&apos;text/javascript&apos;&gt;</span><br><span class="line">//&lt;![CData[</span><br><span class="line">    //这里写js代码！</span><br><span class="line">//]]</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>不支持javascript的浏览器会把<code>&lt;script&gt;</code>元素直接输出到页面，解决方法</p>
<p><script type="text/javascript"><br>&lt;!–</p>
<pre><code>//这里写js代码！
</code></pre><p>–&gt;</script><br>PS：其实这个已经没有必要了，因为大部分浏览器都开始支持js了。</p>
</li>
<li><p><code>&lt;noscript&gt;</code>元素，在浏览器不支持脚本或者脚本被禁用时，<code>&lt;noscript&gt;</code>有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;noscript&gt;</span><br><span class="line">&lt;p&gt;本页面需要浏览器支持（启用）JavaScript&lt;/p&gt;</span><br><span class="line">&lt;/noscript&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="default">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/Javascript经典闭包问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liujiangbei">
      <meta itemprop="description" content="This is description">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liujb's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/01/20/Javascript经典闭包问题/" class="post-title-link" itemprop="url">Javascript经典闭包问题</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-20T00:00:00+08:00">2016-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-08-30 22:17:03" itemprop="dateModified" datetime="2018-08-30T22:17:03+08:00">2018-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong><a href="http://blog.csdn.net/nx8823520/article/details/6858126" target="_blank" rel="noopener">参考地址</a> 感谢那些给我们引导的先驱者们！</strong></p>
<h4 id="引入：为何每次点击都弹出5？？"><a href="#引入：为何每次点击都弹出5？？" class="headerlink" title="引入：为何每次点击都弹出5？？"></a>引入：为何每次点击都弹出5？？</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;    </span><br><span class="line">&lt;title&gt;闭包演示&lt;/title&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt; </span><br><span class="line">   function init() &#123;     </span><br><span class="line">       var pAry = document.getElementsByTagName(&quot;p&quot;);     </span><br><span class="line">       for( var i=0; i&lt;pAry.length; i++ ) &#123;     </span><br><span class="line">            pAry[i].onclick = function() &#123;     </span><br><span class="line">            alert(i);     </span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;&lt;/head&gt;</span><br><span class="line">&lt;body onload=&quot;init();&quot;&gt;</span><br><span class="line">   &lt;p&gt;产品一&lt;/p&gt;</span><br><span class="line">   &lt;p&gt;产品二&lt;/p&gt;</span><br><span class="line">   &lt;p&gt;产品三&lt;/p&gt;</span><br><span class="line">   &lt;p&gt;产品四&lt;/p&gt;</span><br><span class="line">   &lt;p&gt;产品五&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">//为什么会是5呢？</span><br><span class="line">//当 i == 4 的时候，刚好满足了条件，然后再进行了一次 i++，所以  i==5 了。</span><br><span class="line">//所以当点击的时候，弹出 5。</span><br></pre></td></tr></table></figure>
<h4 id="方法1：将变量-i-保存给在每个段落对象（p）上"><a href="#方法1：将变量-i-保存给在每个段落对象（p）上" class="headerlink" title="方法1：将变量 i 保存给在每个段落对象（p）上"></a>方法1：将变量 i 保存给在每个段落对象（p）上</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function init() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       pAry[i].i = i;</span><br><span class="line">       pAry[i].onclick = function() &#123;</span><br><span class="line">           alert(this.i);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 将 i 绑定到 pAry[i] 这个对象上</span><br></pre></td></tr></table></figure>
<h4 id="方法2：将变量-i-保存到匿名函数本身"><a href="#方法2：将变量-i-保存到匿名函数本身" class="headerlink" title="方法2：将变量 i 保存到匿名函数本身"></a>方法2：将变量 i 保存到匿名函数本身</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function init2() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       (pAry[i].onclick = function() &#123;</span><br><span class="line">           alert(arguments.callee.i);</span><br><span class="line">       &#125;).i = i;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 将 i 绑定到 (pAry[i].onclick = function() &#123;&#125; )这个对象上</span><br></pre></td></tr></table></figure>
<h4 id="方法3：加一层闭包将-i-以函数参数的形式传递给内层函数"><a href="#方法3：加一层闭包将-i-以函数参数的形式传递给内层函数" class="headerlink" title="方法3：加一层闭包将 i 以函数参数的形式传递给内层函数"></a>方法3：加一层闭包将 i 以函数参数的形式传递给内层函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function init3() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       (function(arg) &#123;</span><br><span class="line">           pAry[i].onclick = function() &#123;</span><br><span class="line">               alert(arg);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)(i)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法4：加一层闭包将-i-以局部变量"><a href="#方法4：加一层闭包将-i-以局部变量" class="headerlink" title="方法4：加一层闭包将 i 以局部变量"></a>方法4：加一层闭包将 i 以局部变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function init() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       (function() &#123;</span><br><span class="line">           var tmp = i; //局部变量</span><br><span class="line">           pAry[i].onclick = function() &#123;</span><br><span class="line">               alert(tmp);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)()</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法5：返回一个函数作为响应事件（注意与3的细微区别）"><a href="#方法5：返回一个函数作为响应事件（注意与3的细微区别）" class="headerlink" title="方法5：返回一个函数作为响应事件（注意与3的细微区别）"></a>方法5：返回一个函数作为响应事件（注意与3的细微区别）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function init5() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       pAry[i].onclick = function(arg) &#123;</span><br><span class="line">           return function() &#123; //返回一个函数     </span><br><span class="line">               alert(arg);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;(i);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法6：用Function实现，实际上每产生一个函数实例就会产生一个闭包"><a href="#方法6：用Function实现，实际上每产生一个函数实例就会产生一个闭包" class="headerlink" title="方法6：用Function实现，实际上每产生一个函数实例就会产生一个闭包"></a>方法6：用Function实现，实际上每产生一个函数实例就会产生一个闭包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function init6() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       pAry[i].onclick = new Function(&quot;alert(&quot; + i + &quot;);&quot;); //new一次就产生一个函数实例    </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法7：用Function实现，注意与6的区别"><a href="#方法7：用Function实现，注意与6的区别" class="headerlink" title="方法7：用Function实现，注意与6的区别"></a>方法7：用Function实现，注意与6的区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function init7() &#123;</span><br><span class="line">   var pAry = document.getElementsByTagName(&quot;p&quot;);</span><br><span class="line">   for (var i = 0; i &lt; pAry.length; i++) &#123;</span><br><span class="line">       pAry[i].onclick = Function(&apos;alert(&apos; + i + &apos;)&apos;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Liujb整理</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="liujiangbei"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">liujiangbei</p>
  <div class="site-description" itemprop="description">This is description</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">186</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/liujb" title="GitHub → https://github.com/liujb" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liujiangbei88@gmail.com" title="Mail → mailto:liujiangbei88@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/PrivateGuess" title="Twitter → https://twitter.com/PrivateGuess" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liujiangbei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.7.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
